import{_ as k,r as i,o as _,c as f,b as a,t as w,F as x,y as E,a as I,e as r,w as b,z as A,A as T,B as $,j as B,C,k as F,g as J}from"./entry.95095313.js";import{aT as O,a as P,aU as z}from"./admin.api.c4618457.js";import{L as q}from"./Loading.5d2fac71.js";import{l as N,_ as D,a as L}from"./Pagination.12ab80d4.js";const V=s=>(T("data-v-965f5223"),s=s(),$(),s),M={class:"container"},R={class:"count"},U={class:"responsive-table"},j=V(()=>a("li",{class:"table-header"},[a("div",{class:"col col-1"},"Question EN"),a("div",{class:"col col-2"},"Answer EN"),a("div",{class:"col col-4"},"Functions")],-1)),G={class:"table-row"},H={class:"col col-1","data-label":"Title EN"},K={class:"col col-2","data-label":"Title RU"},W={class:"col col-4","data-label":"Functions"},X={__name:"QuestionAnswersTable",props:{items:Array,count:Number},emits:["delete-item"],setup(s,{emit:v}){const u=s,d=i([]),n=i(!1),m=async o=>{await O({id:o}).then(()=>{n.value=!0,d.value=u.items.filter(p=>p.id!==o),v("delete-item",d.value)}),n.value=!1};return(o,p)=>{const t=I("FilePencilIcon"),g=I("v-btn"),y=I("TrashIcon");return _(),f("div",null,[a("div",M,[a("span",R,"Sany ( "+w(u.count)+" )",1),a("ul",U,[j,(_(!0),f(x,null,E(s.items,(l,S)=>(_(),f("li",G,[a("div",H,w(l.questionEn),1),a("div",K,w(l.answerEn),1),a("div",W,[r(g,A({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:c=>o.$goPage(`/questions-answers/${l.id}`),variant:"text"},u),{default:b(()=>[r(t,{size:"15"})]),_:2},1040,["onClick"]),r(g,A({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:c=>m(l.id)},u),{default:b(()=>[r(y,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},Y=k(X,[["__scopeId","data-v-965f5223"]]),Z={key:1},ne={__name:"index",setup(s){const v=i(!1),u=B(),d=i([]),n=i(0),m=JSON.parse(localStorage.getItem("QuestionAnswerQuery"))||{page:1,eventId:""},o=i([]),p=async()=>{const e=await P({limit:100});var h=[];for(var Q of e.data.data)h.push({name:Q.name,value:{eventId:Q.id}});o.value=h},t=i({page:m.page||1,limit:N,eventId:m.eventId}),g=e=>{d.value=e,c()};C(u,e=>{localStorage.setItem("QuestionAnswerQuery",JSON.stringify(t.value))},{deep:!0,immediate:!0});const y=e=>{e&&(t.value.page=1,t.value.eventId=e.eventId,localStorage.setItem("QuestionAnswerQuery",JSON.stringify(t.value)),c())},l=e=>{e&&(t.value.keyword=e,t.value.page=1,localStorage.setItem("QuestionAnswerQuery",JSON.stringify(t.value)),c())},S=e=>{e&&(t.value.page=e,localStorage.setItem("QuestionAnswerQuery",JSON.stringify(t.value)),c())},c=async()=>{const{data:e}=await z(JSON.parse(localStorage.getItem("QuestionAnswerQuery"))||t.value);d.value=e.data,n.value=e.count};return F(async()=>{v.value=!0,await c(),await p(),Math.ceil(n.value/N)==0&&(t.value.page=1,localStorage.setItem("QuestionAnswerQuery",JSON.stringify(t.value))),v.value=!1}),(e,h)=>v.value?(_(),J(q,{key:0})):(_(),f("div",Z,[r(D,{path:"/questions-answers/0",items:o.value,onFilter:y,onSearch:l,onSearchEmpty:l},null,8,["items"]),r(Y,{items:d.value,onDeleteItem:g,count:n.value},null,8,["items","count"]),r(L,{count:n.value,onSetPagination:S,page:t.value.page},null,8,["count","page"])]))}};export{ne as default};
