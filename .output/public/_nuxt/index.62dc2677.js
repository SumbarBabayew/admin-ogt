import{M as d}from"./MTextField.5144c562.js";import{aa as F,F as q,ab as g}from"./admin.api.c4618457.js";import{i as P,j as R,r as m,k as j,g as C,c as S,e as a,w as o,a as u,o as V,b as f,f as T,t as N,m as _}from"./entry.95095313.js";import{L as z}from"./Loading.5d2fac71.js";/* empty css                       */const L={key:1,class:"mx-3"},M={class:"d-flex align-center justify-space-between pt-sm-2"},$={class:"d-flex justify-end pb-3"},G={class:"mr-2"},X={__name:"index",setup(H){const p=P(),i=R(),r=m(!1),v=m(!1),c=m(!1),e=m({firstName:null,lastName:null,birthDate:null,nationality:null,passportNumber:null,passportExpiryDate:null,gender:null,isRound:null,flightId:null}),b=m([]),x=async()=>{const s=await q({limit:100});b.value=s.data},w=async()=>{if(i.params.id==0){if(!e.value.firstName||!e.value.lastName||!e.value.phone||!e.value.email||!e.value.passportNumber||!e.value.company)return r.value=!0;c.value=!0,await g({data:e.value,id:i.params.id}).then(async s=>{p.go(-1)}).catch(s=>{alert(s)})}else{if(!e.value.firstName||!e.value.lastName||!e.value.phone||!e.value.email||!e.value.passportNumber||!e.value.company)return r.value=!0;c.value=!0,await g({data:e.value,id:i.params.id}).then(async s=>{p.go(-1)}).catch(s=>{alert(s)})}};return j(async()=>{if(await x(),i.params.id!=0){v.value=!0;const{data:s}=await F({id:i.params.id});e.value=s,v.value=!1}}),(s,t)=>{const D=u("v-card-title"),h=u("ArrowBackUpIcon"),k=u("v-avatar"),y=u("v-btn"),n=u("v-col"),U=u("v-select"),E=u("v-row"),I=u("v-card-item"),B=u("ScriptPlusIcon"),A=u("v-card");return v.value?(V(),C(z,{key:0})):(V(),S("div",L,[a(A,{elevation:"10",class:"withbg"},{default:o(()=>[a(I,null,{default:o(()=>[f("div",M,[a(D,{class:"text-h5"},{default:o(()=>[T(N(_(i).params.id==0?"Add":"Edit")+" accommodation request",1)]),_:1}),a(y,{size:"large",icon:"",class:"bg-primary",onClick:t[0]||(t[0]=l=>_(p).go(-1))},{default:o(()=>[a(k,{size:"large",class:"text-white"},{default:o(()=>[a(h,{size:"25"})]),_:1})]),_:1})]),a(E,{class:"mt-3"},{default:o(()=>[a(n,{cols:"6"},{default:o(()=>[a(d,{type:"text",label:"Firstname",error:!e.value.firstName&&r.value,modelValue:e.value.firstName,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.firstName=l)},null,8,["error","modelValue"])]),_:1}),a(n,{cols:"6"},{default:o(()=>[a(d,{type:"text",label:"Lastname",error:!e.value.lastName&&r.value,modelValue:e.value.lastName,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.lastName=l)},null,8,["error","modelValue"])]),_:1}),a(n,{cols:"6"},{default:o(()=>[a(d,{type:"text",label:"Nationality",error:!e.value.nationality&&r.value,modelValue:e.value.nationality,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.nationality=l)},null,8,["error","modelValue"])]),_:1}),a(n,{cols:"6"},{default:o(()=>[a(d,{type:"text",label:"Passport number",error:!e.value.passportNumber&&r.value,modelValue:e.value.passportNumber,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.passportNumber=l)},null,8,["error","modelValue"])]),_:1}),a(n,{cols:"6"},{default:o(()=>[a(d,{type:"text",label:"Passport",error:!e.value.passportNumber&&r.value,modelValue:e.value.passportNumber,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.passportNumber=l)},null,8,["error","modelValue"])]),_:1}),a(n,{cols:"6"},{default:o(()=>[a(d,{type:"date",label:"Passport Expiry",error:!e.value.passportExpiryDate&&r.value,modelValue:e.value.passportExpiryDate,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.passportExpiryDate=l)},null,8,["error","modelValue"])]),_:1}),a(n,{cols:"6"},{default:o(()=>[a(d,{type:"date",label:"Birthdate",error:!e.value.birthDate&&r.value,modelValue:e.value.birthDate,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.birthDate=l)},null,8,["error","modelValue"])]),_:1}),a(n,{cols:"12",lg:"12",sm:"13"},{default:o(()=>[a(U,{label:"Select flight",items:b.value.data,error:!e.value.flightId&&r.value,required:"","item-title":l=>`${l.departureTime}`,modelValue:e.value.flightId,"onUpdate:modelValue":t[8]||(t[8]=l=>e.value.flightId=l),"item-value":"id",variant:"outlined","return-object":!1},null,8,["items","error","item-title","modelValue"])]),_:1})]),_:1})]),_:1}),f("div",$,[a(y,{class:"profileBtn bg-primary custom-hover-primary",variant:"text",loading:c.value,onClick:w},{default:o(()=>[f("span",G,N(_(i).params.id==0?"Add":"Edit")+" request",1),a(B)]),_:1},8,["loading"])])]),_:1})]))}}};export{X as default};
