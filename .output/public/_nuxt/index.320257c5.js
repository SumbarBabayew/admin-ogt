import{_ as N,r as c,o as m,c as I,b as l,t as y,F as T,y as $,s as x,a as h,e as t,w as S,z as P,j as z,C as B,k as F,g as J}from"./entry.95095313.js";import{aP as O,a as E,aQ as D}from"./admin.api.c4618457.js";import{L}from"./Loading.5d2fac71.js";import{l as w,_ as R,a as U}from"./Pagination.12ab80d4.js";const V={class:"container"},X={class:"count"},A={class:"responsive-table"},M=x('<li class="table-header" data-v-181afb9f><div class="col col-1" data-v-181afb9f>Title EN</div><div class="col col-2" data-v-181afb9f>Title RU</div><div class="col col-2" data-v-181afb9f>Title X</div><div class="col col-4" data-v-181afb9f>Functions</div></li>',1),Q={class:"table-row"},j={class:"col col-1","data-label":"Title EN"},q={class:"col col-2","data-label":"Title RU"},G={class:"col col-2","data-label":"Title X"},H={class:"col col-4","data-label":"Functions"},K={__name:"ParticipantCategoryTable",props:{items:Array,count:Number},emits:["delete-item"],setup(b,{emit:d}){const o=b,r=c([]),i=c(!1),_=async n=>{await O({id:n}).then(()=>{i.value=!0,r.value=o.items.filter(v=>v.id!==n),d("delete-item",r.value)}),i.value=!1};return(n,v)=>{const a=h("FilePencilIcon"),p=h("v-btn"),C=h("TrashIcon"),g=h("UsersIcon");return m(),I("div",null,[l("div",V,[l("span",X,"Sany ( "+y(o.count)+" )",1),l("ul",A,[M,(m(!0),I(T,null,$(b.items,(s,u)=>(m(),I("li",Q,[l("div",j,y(s.nameEn),1),l("div",q,y(s.nameRu),1),l("div",G,y(s.nameX),1),l("div",H,[t(p,P({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:e=>n.$goPage(`/participant-categories/${s.id}`),variant:"text"},o),{default:S(()=>[t(a,{size:"15"})]),_:2},1040,["onClick"]),t(p,P({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:e=>_(s.id)},o),{default:S(()=>[t(C,{size:"15"})]),_:2},1040,["onClick"]),t(p,P({size:"25",class:"profileBtn bg-success custom-hover-primary",variant:"text",onClick:e=>n.$goPage(`/participant-categories/companies/${s.id}`)},o),{default:S(()=>[t(g,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},W=N(K,[["__scopeId","data-v-181afb9f"]]),Y={key:1},se={__name:"index",setup(b){const d=c(!1),o=z(),r=c([]),i=c(0),_=c([]),n=async()=>{const e=await E({limit:100});var f=[];f.push({name:"All",value:{eventId:""}});for(var k of e.data.data)f.push({name:k.name,value:{eventId:k.id}});_.value=f},v=JSON.parse(localStorage.getItem("ParticipantCategories"))||{page:1,keyword:"",eventId:""},a=c({page:v.page||1,keyword:v.keyword,limit:w,eventId:""}),p=e=>{r.value=e,u()};B(o,e=>{localStorage.setItem("ParticipantCategories",JSON.stringify(a.value))},{deep:!0,immediate:!0});const C=e=>{e&&(a.value.keyword="",a.value.page=1,a.value.eventId=e.eventId,localStorage.setItem("ParticipantCategories",JSON.stringify(a.value)),u())},g=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("ParticipantCategories",JSON.stringify(a.value)),u())},s=e=>{e&&(a.value.page=e,localStorage.setItem("ParticipantCategories",JSON.stringify(a.value)),u())},u=async()=>{const{data:e}=await D(JSON.parse(localStorage.getItem("ParticipantCategories"))||a.value);r.value=e.data,i.value=e.count};return F(async()=>{d.value=!0,await n(),await u(),Math.ceil(i.value/w)==0&&(a.value.page=1,localStorage.setItem("ParticipantCategories",JSON.stringify(a.value))),d.value=!1}),(e,f)=>d.value?(m(),J(L,{key:0})):(m(),I("div",Y,[t(R,{path:"/participant-categories/0",items:_.value,onFilter:C,onSearch:g,onSearchEmpty:g},null,8,["items"]),t(W,{items:r.value,onDeleteItem:p,count:i.value},null,8,["items","count"]),t(U,{count:i.value,onSetPagination:s,page:a.value.page},null,8,["count","page"])]))}};export{se as default};
