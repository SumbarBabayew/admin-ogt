import{_ as w,r as u,o as d,c as g,b as n,t as m,F as N,y as $,s as B,a as p,q as C,e as a,w as S,z as b,j as x,C as z,k as Q,g as F,m as J}from"./entry.95095313.js";import{a4 as O,a as P}from"./admin.api.c4618457.js";import{L as T}from"./Loading.5d2fac71.js";import{l as I,_ as D,a as L,p as V}from"./Pagination.12ab80d4.js";const q={class:"container"},M={class:"count"},j={class:"responsive-table"},A=B('<li class="table-header" data-v-8481c432><div class="col col-1" data-v-8481c432>Name</div><div class="col col-2" data-v-8481c432>Subtitle</div><div class="col col-2" data-v-8481c432>Date</div><div class="col col-4" data-v-8481c432>Functions</div></li>',1),R={class:"table-row"},G={class:"col col-2","data-label":"Subtitle"},H={class:"col col-2","data-label":"Date"},K={class:"col col-4","data-label":"Functions"},U={__name:"EventsTable",props:{items:Array,count:Number},emits:["delete-item"],setup(y,{emit:v}){const s=y,c=u([]),o=u(!1),i=async t=>{await O({id:t}).then(()=>{o.value=!0,c.value=s.items.filter(_=>_.id!==t),v("delete-item",c.value)}),o.value=!1};return(t,_)=>{const f=p("FilePencilIcon"),r=p("v-btn"),h=p("TrashIcon"),l=p("BuildingSkyscraperIcon");return d(),g("div",null,[n("div",q,[n("span",M,"Sany ( "+m(s.count)+" )",1),n("ul",j,[A,(d(!0),g(N,null,$(y.items,(e,E)=>(d(),g("li",R,[n("div",{class:"col col-1","data-label":"Title",style:C({color:`#${e.color}`})},m((e.session!=null,e.name)),5),n("div",G,m(e.subtitle),1),n("div",H,m(e.date),1),n("div",K,[a(r,b({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:k=>t.$goPage(`/events/${e.id}`),variant:"text"},s),{default:S(()=>[a(f,{size:"15"})]),_:2},1040,["onClick"]),a(r,b({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:k=>i(e.id)},s),{default:S(()=>[a(h,{size:"15"})]),_:2},1040,["onClick"]),a(r,b({size:"30",class:"profileBtn bg-secondary custom-hover-primary",variant:"text",onClick:k=>t.$goPage(`/events/hotels/${e.id}`)},s),{default:S(()=>[a(l,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},W=w(U,[["__scopeId","data-v-8481c432"]]),X={key:1},ae={__name:"index",setup(y){const v=u(!1),s=x(),c=u([]),o=u(0),i=JSON.parse(localStorage.getItem("EventsQuery"))||{page:1,keyword:"",as:"",sort_by:""},t=u({page:i.page||1,keyword:i.keyword,limit:I,as:i.as||"",sort_by:i.sort_by||""}),_=e=>{c.value=e,l()};z(s,e=>{localStorage.setItem("EventsQuery",JSON.stringify(t.value))},{deep:!0,immediate:!0});const f=e=>{e&&(t.value.keyword="",t.value.page=1,t.value.as=e.as,t.value.sort_by=e.sort_by,localStorage.setItem("EventsQuery",JSON.stringify(t.value)),l())},r=e=>{e&&(t.value.keyword=e,t.value.page=1,localStorage.setItem("EventsQuery",JSON.stringify(t.value)),l())},h=e=>{e&&(t.value.page=e,localStorage.setItem("EventsQuery",JSON.stringify(t.value)),l())},l=async()=>{const{data:e}=await P(JSON.parse(localStorage.getItem("EventsQuery"))||t.value);c.value=e.data,o.value=e.count};return Q(async()=>{v.value=!0,await l(),Math.ceil(o.value/I)==0&&(t.value.page=1,localStorage.setItem("EventsQuery",JSON.stringify(t.value))),v.value=!1}),(e,E)=>v.value?(d(),F(T,{key:0})):(d(),g("div",X,[a(D,{path:"/agenda/0",items:J(V),onFilter:f,onSearch:r,onSearchEmpty:r},null,8,["items"]),a(W,{items:c.value,onDeleteItem:_,count:o.value},null,8,["items","count"]),a(L,{count:o.value,onSetPagination:h,page:t.value.page},null,8,["count","page"])]))}};export{ae as default};
