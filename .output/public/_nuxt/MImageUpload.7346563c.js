import{b as I}from"./BaseUrl.ad8812f8.js";import{A as x}from"./admin.api.c4618457.js";import{r as f,k as b,a as _,o,c as s,b as a,t as k,e as p,w as v,F as B,y as P,m as C,q as S,l as $,p as F}from"./entry.95095313.js";const U={class:"container__add__image"},A={class:"label"},N={class:"container__add__image--box"},V={class:"container__add__image--box--img"},z=["src"],D=["onClick"],L={style:{display:"flex","justify-content":"center"}},M={class:"imgBox"},R={class:"container__add__image--box--item"},X={__name:"MImageUpload",props:{photoSrc:{type:String,default:null},deleteImageById:{type:String,default:"0"},error:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"100%"},selectedFile:{type:String,default:""},style:{type:String,default:""},type:{type:String,default:"store"}},emits:["photoPath"],setup(g,{emit:m}){const e=g,t=f([]),l=f([]),h=async i=>{e.multiple||(l.value=[],t.value=[]);const n=i.target.files;for(let r of n){let c=new FileReader;c.onload=u=>{t.value.push(u.target.result)},l.value.push(r),await c.readAsDataURL(r)}m("photoPath",l.value)},w=async(i,n)=>{e.type!="user"&&(e.deleteImageById!="0"&&(n[0]!="d"?e.type=="gallery"&&await x({id:e.deleteImageById,data:{img:n}}):l.value.length==1?l.value=[]:l.value.splice(t.value.length-i,1)),t.value.splice(i,1),m("photoPath",l.value))};return b(async()=>{console.log("src is ",e.photoSrc),e.photoSrc.type=="array"&&(t.value=await e.photoSrc.value),e.photoSrc.type=="string"&&await t.value.push(e.photoSrc.value)}),(i,n)=>{const r=_("v-col"),c=_("v-row"),u=_("PictureInPictureIcon");return o(),s("div",{class:F([e.error?"error":"","container__add"]),style:S(g.style)},[a("div",U,[a("div",A,k(e.placeholder),1),a("div",N,[a("div",V,[p(c,null,{default:v(()=>[p(r,{class:"d-flex gap-4 flex-wrap",lg:"12",sm:"12"},{default:v(()=>[(o(!0),s(B,null,P(t.value,(d,y)=>(o(),s("div",{class:"list-group-item",key:y},[a("img",{crossorigin:"anonymous",class:"container__add__image--box--img--img",src:d[0]!="d"?`${C(I).url_base}/${d}`:d,style:S(`width:${e.width}; height:${e.height}`)},null,12,z),t.value.length!=0?(o(),s("div",{key:0,class:"container__add__image--box--img--delete",onClick:j=>w(y,d)},"X ",8,D)):$("",!0)]))),128))]),_:1})]),_:1})]),a("div",L,[a("div",M,[p(u,{style:{color:"white"}}),a("div",R,[e.multiple?(o(),s("input",{key:0,onChange:h,multiple:"",class:"input_change",type:"file"},null,32)):(o(),s("input",{key:1,onChange:h,class:"input_change",type:"file"},null,32))])])])])])],6)}}};export{X as _};
