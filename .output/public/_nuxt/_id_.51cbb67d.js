import{_ as I,r as i,o as m,c as g,b as a,t as f,F as E,y as N,a as b,m as y,e as _,w as k,z as w,A as H,B as Q,j as x,C as J,k as O,g as B}from"./entry.95095313.js";import{a2 as F,a3 as $}from"./admin.api.c4618457.js";import{b as C}from"./BaseUrl.ad8812f8.js";import{L as T}from"./Loading.5d2fac71.js";import{l as S,_ as L,a as z,p as D}from"./Pagination.12ab80d4.js";const P=o=>(H("data-v-d2a04326"),o=o(),Q(),o),V={class:"container"},A={class:"count"},M={class:"responsive-table"},j=P(()=>a("li",{class:"table-header"},[a("div",{class:"col col-1"},"Image"),a("div",{class:"col col-1"},"Name"),a("div",{class:"col col-4"},"Functions")],-1)),q={class:"table-row"},R={class:"col col-2","data-label":"Image"},U=["src"],G={class:"col col-1","data-label":"Name"},K={class:"col col-4","data-label":"Functions"},W={__name:"EventHotelsTable",props:{items:Array,count:Number,chatroom:Number},emits:["delete-item"],setup(o,{emit:u}){const s=o,n=i([]),l=i(!1),c=async e=>{await F({data:{hotelId:e,eventId:Number(s.chatroom)}}).then(()=>{l.value=!0,n.value=s.items.filter(v=>v.id!==e),u("delete-item",n.value)}),l.value=!1};return(e,v)=>{const h=b("TrashIcon"),p=b("v-btn");return m(),g("div",null,[a("div",V,[a("span",A,"Sany ( "+f(s.count)+" )",1),a("ul",M,[j,(m(!0),g(E,null,N(o.items,(d,r)=>(m(),g("li",q,[a("div",R,[a("img",{crossorigin:"anonymous",class:"image",src:y(C).url_base+"/"+d.image},null,8,U)]),a("div",G,f(d.nameEn),1),a("div",K,[_(p,w({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:t=>c(d.id)},s),{default:k(()=>[_(h,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},X=I(W,[["__scopeId","data-v-d2a04326"]]),Y={key:1},le={__name:"[id]",setup(o){const u=i(!1),s=x(),n=i([]),l=i(0),c=JSON.parse(localStorage.getItem("EventHotelsQuery"))||{page:1,keyword:"",as:"",sort_by:""},e=i({page:c.page||1,keyword:c.keyword,limit:S,as:c.as||"",sort_by:c.sort_by||""}),v=t=>{n.value=t,r()};J(s,t=>{localStorage.setItem("EventHotelsQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const h=t=>{t&&(e.value.keyword="",e.value.page=1,e.value.as=t.as,e.value.sort_by=t.sort_by,localStorage.setItem("EventHotelsQuery",JSON.stringify(e.value)),r())},p=t=>{t&&(e.value.keyword=t,e.value.page=1,localStorage.setItem("EventHotelsQuery",JSON.stringify(e.value)),r())},d=t=>{t&&(e.value.page=t,localStorage.setItem("EventHotelsQuery",JSON.stringify(e.value)),r())},r=async()=>{const{data:t}=await $({id:s.params.id,...JSON.parse(localStorage.getItem("EventHotelsQuery"))||e.value});n.value=t.data,l.value=t.count};return O(async()=>{u.value=!0,await r(),Math.ceil(l.value/S)==0&&(e.value.page=1,localStorage.setItem("EventHotelsQuery",JSON.stringify(e.value))),u.value=!1}),(t,Z)=>u.value?(m(),B(T,{key:0})):(m(),g("div",Y,[_(L,{path:`/events/add-hotel/${y(s).params.id}`,items:y(D),onFilter:h,onSearch:p,onSearchEmpty:p},null,8,["path","items"]),_(X,{items:n.value,onDeleteItem:v,count:l.value,chatroom:y(s).params.id},null,8,["items","count","chatroom"]),_(z,{count:l.value,onSetPagination:d,page:e.value.page},null,8,["count","page"])]))}};export{le as default};
