import{_ as H,r,o as m,c as f,b as s,t as v,F as R,y as w,s as N,a as h,e as l,w as S,z as I,j as $,C as x,k as P,g as Q,m as C}from"./entry.95095313.js";import{aY as F,aZ as J}from"./admin.api.c4618457.js";import{L as O}from"./Loading.5d2fac71.js";import{l as k,_ as T,a as B,p as z}from"./Pagination.12ab80d4.js";const E={class:"container"},L={class:"count"},V={class:"responsive-table"},D=N('<li class="table-header" data-v-38f3f06a><div class="col col-1" data-v-38f3f06a>Title</div><div class="col col-2" data-v-38f3f06a>Hotel</div><div class="col col-2" data-v-38f3f06a>Price</div><div class="col col-4" data-v-38f3f06a>Functions</div></li>',1),M={class:"table-row"},j={class:"col col-1","data-label":"Title"},q={class:"col col-2","data-label":"Hotel"},A={class:"col col-2","data-label":"Price"},Y={class:"col col-4","data-label":"Functions"},Z={__name:"HotelRoomsTable",props:{items:Array,count:Number},emits:["delete-item"],setup(p,{emit:u}){const c=p,n=r([]),o=r(!1),i=async e=>{await F({id:e}).then(()=>{o.value=!0,n.value=c.items.filter(_=>_.id!==e),u("delete-item",n.value)}),o.value=!1};return(e,_)=>{const g=h("FilePencilIcon"),d=h("v-btn"),y=h("TrashIcon");return m(),f("div",null,[s("div",E,[s("span",L,"Sany ( "+v(c.count)+" )",1),s("ul",V,[D,(m(!0),f(R,null,w(p.items,(a,t)=>(m(),f("li",M,[s("div",j,v(a.nameEn),1),s("div",q,v(a.hotel!=null?a.hotel.nameEn:"No hotel"),1),s("div",A,v(a.price)+"$",1),s("div",Y,[l(d,I({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:b=>e.$goPage(`/rooms/${a.id}`),variant:"text"},c),{default:S(()=>[l(g,{size:"15"})]),_:2},1040,["onClick"]),l(d,I({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:b=>i(a.id)},c),{default:S(()=>[l(y,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},G=H(Z,[["__scopeId","data-v-38f3f06a"]]),K={key:1},te={__name:"index",setup(p){const u=r(!1),c=$(),n=r([]),o=r(0),i=JSON.parse(localStorage.getItem("HotelRoomsQuery"))||{page:1,keyword:"",as:"",sort_by:""},e=r({page:i.page||1,keyword:i.keyword,limit:k,as:i.as||"",sort_by:i.sort_by||""}),_=t=>{n.value=t,a()};x(c,t=>{localStorage.setItem("HotelRoomsQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const g=t=>{t&&(e.value.keyword="",e.value.page=1,e.value.as=t.as,e.value.sort_by=t.sort_by,localStorage.setItem("HotelRoomsQuery",JSON.stringify(e.value)),a())},d=t=>{t&&(e.value.keyword=t,e.value.page=1,localStorage.setItem("HotelRoomsQuery",JSON.stringify(e.value)),a())},y=t=>{t&&(e.value.page=t,localStorage.setItem("HotelRoomsQuery",JSON.stringify(e.value)),a())},a=async()=>{const{data:t}=await J(JSON.parse(localStorage.getItem("HotelRoomsQuery"))||e.value);n.value=t.data,o.value=t.count};return P(async()=>{u.value=!0,await a(),Math.ceil(o.value/k)==0&&(e.value.page=1,localStorage.setItem("HotelRoomsQuery",JSON.stringify(e.value))),u.value=!1}),(t,b)=>u.value?(m(),Q(O,{key:0})):(m(),f("div",K,[l(T,{path:"/rooms/0",items:C(z),onFilter:g,onSearch:d,onSearchEmpty:d},null,8,["items"]),l(G,{items:n.value,onDeleteItem:_,count:o.value},null,8,["items","count"]),l(B,{count:o.value,onSetPagination:y,page:e.value.page},null,8,["count","page"])]))}};export{te as default};
