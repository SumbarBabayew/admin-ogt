import{_ as N,r as i,o as m,c as y,b as s,t as n,F as R,y as C,s as F,a as S,m as x,e as r,w as q,z as V,j as O,C as P,k as Q,g as $}from"./entry.95095313.js";import{bq as E,a as J,br as B}from"./admin.api.c4618457.js";import{b as L}from"./BaseUrl.ad8812f8.js";import{L as z}from"./Loading.5d2fac71.js";import{l as w,_ as D,a as A}from"./Pagination.12ab80d4.js";const M={class:"container"},T={class:"count"},j={class:"responsive-table"},U=F('<li class="table-header" data-v-f1e5dd90><div class="col col-1" data-v-f1e5dd90>Suraty</div><div class="col col-1" data-v-f1e5dd90>Firstname</div><div class="col col-2" data-v-f1e5dd90>Lastname</div><div class="col col-2" data-v-f1e5dd90>Phone</div><div class="col col-2" data-v-f1e5dd90>Email</div><div class="col col-2" data-v-f1e5dd90>Country</div><div class="col col-2" data-v-f1e5dd90>Event</div><div class="col col-4" data-v-f1e5dd90>Functions</div></li>',1),G={class:"table-row"},H={class:"col col-2","data-label":"Suraty"},K=["src"],W={class:"col col-1","data-label":"Firstname"},X={class:"col col-2","data-label":"Lastname"},Y={class:"col col-2","data-label":"Phone"},Z={class:"col col-2","data-label":"Email"},ee={class:"col col-2","data-label":"Organisation"},ae={class:"col col-2","data-label":"Event",style:{color:"green"}},te={class:"col col-4","data-label":"Functions"},se={__name:"VisaRequest",props:{items:Array,count:Number},emits:["delete-item"],setup(h,{emit:_}){const d=h,u=i([]),o=i(!1),p=async v=>{await E({id:v}).then(()=>{o.value=!0,u.value=d.items.filter(l=>l.id!==v),_("delete-item",u.value)}),o.value=!1};return(v,l)=>{const a=S("FilePencilIcon"),f=S("v-btn"),b=S("TrashIcon");return m(),y("div",null,[s("div",M,[s("span",T,"Sany ( "+n(d.count)+" )",1),s("ul",j,[U,(m(!0),y(R,null,C(h.items,(t,I)=>(m(),y("li",G,[s("div",H,[s("img",{crossorigin:"anonymous",class:"image",src:x(L).url_base+"/"+t.photo},null,8,K)]),s("div",W,n(t.firstName),1),s("div",X,n(t.lastName),1),s("div",Y,n(t.phone),1),s("div",Z,n(t.email),1),s("div",ee,n(t.companyCountry),1),s("div",ae,n(t.event!=null?t.event.name:""),1),s("div",te,[r(f,V({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:c=>v.$goPage(`/visa-request/${t.id}`),variant:"text"},d),{default:q(()=>[r(a,{size:"15"})]),_:2},1040,["onClick"]),r(f,V({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:c=>p(t.id)},d),{default:q(()=>[r(b,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},oe=N(se,[["__scopeId","data-v-f1e5dd90"]]),le={key:1},ue={__name:"index",setup(h){const _=i(!1),d=O(),u=i([]),o=i(0),p=i([]),v=async()=>{const e=await J({limit:100});var g=[];g.push({name:"All",value:{eventId:""}});for(var k of e.data.data)g.push({name:k.name,value:{eventId:k.id}});p.value=g},l=JSON.parse(localStorage.getItem("VisaRequestsQuery"))||{page:1,keyword:"",as:"",sort_by:""},a=i({page:l.page||1,keyword:l.keyword,limit:w,as:l.as||"",sort_by:l.sort_by||""}),f=e=>{u.value=e,c()};P(d,e=>{localStorage.setItem("VisaRequestsQuery",JSON.stringify(a.value))},{deep:!0,immediate:!0});const b=e=>{e&&(a.value.keyword="",a.value.page=1,a.value.eventId=e.eventId,localStorage.setItem("VisaRequestsQuery",JSON.stringify(a.value)),c())},t=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("VisaRequestsQuery",JSON.stringify(a.value)),c())},I=e=>{e&&(a.value.page=e,localStorage.setItem("VisaRequestsQuery",JSON.stringify(a.value)),c())},c=async()=>{const{data:e}=await B(JSON.parse(localStorage.getItem("VisaRequestsQuery"))||a.value);u.value=e.data,o.value=e.count};return Q(async()=>{_.value=!0,await v(),await c(),Math.ceil(o.value/w)==0&&(a.value.page=1,localStorage.setItem("VisaRequestsQuery",JSON.stringify(a.value))),_.value=!1}),(e,g)=>_.value?(m(),$(z,{key:0})):(m(),y("div",le,[r(D,{path:"/visa-request/0",items:p.value,onFilter:b,onSearch:t,onSearchEmpty:t},null,8,["items"]),r(oe,{items:u.value,onDeleteItem:f,count:o.value},null,8,["items","count"]),r(A,{count:o.value,onSetPagination:I,page:a.value.page},null,8,["count","page"])]))}};export{ue as default};
