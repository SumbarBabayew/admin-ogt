import{_ as O,j as N,r as c,o as m,c as v,b as o,t as f,F as Q,y as $,s as F,a as C,m as h,e as n,w as b,z as S,C as J,k as x,g as B}from"./entry.95095313.js";import{aN as P,aO as z}from"./admin.api.c4618457.js";import{b as T}from"./BaseUrl.ad8812f8.js";import{L}from"./Loading.5d2fac71.js";import{l as I,_ as V,a as D,p as E}from"./Pagination.12ab80d4.js";const M={class:"container"},U={class:"count"},W={class:"responsive-table"},j=F('<li class="table-header" data-v-360d4506><div class="col col-2" data-v-360d4506>Image</div><div class="col col-2" data-v-360d4506>Name</div><div class="col col-2" data-v-360d4506>Website</div><div class="col col-4" data-v-360d4506>Functions</div></li>',1),q={class:"table-row"},A={class:"col col-2","data-label":"Image"},R=["src"],G={class:"col col-2","data-label":"Name"},H={class:"col col-2","data-label":"Website"},K={class:"col col-4","data-label":"Functions"},X={__name:"CategoryCompaniesTable",props:{items:Array,count:Number},emits:["delete-item"],setup(y,{emit:r}){const t=y,u=N(),s=c([]),d=c(!1),a=async i=>{await P({data:{participantCategoryId:Number(u.params.id),participantCompanyId:i}}).then(()=>{d.value=!0,s.value=t.items.filter(p=>p.id!==i),r("delete-item",s.value)}),d.value=!1};return(i,p)=>{const _=C("FilePencilIcon"),g=C("v-btn"),l=C("TrashIcon");return m(),v("div",null,[o("div",M,[o("span",U,"Sany ( "+f(t.count)+" )",1),o("ul",W,[j,(m(!0),v(Q,null,$(y.items,(e,k)=>(m(),v("li",q,[o("div",A,[o("img",{crossorigin:"anonymous",class:"image",src:h(T).url_base+"/"+e.image},null,8,R)]),o("div",G,f(e.nameEn),1),o("div",H,f(e.siteUrl),1),o("div",K,[n(g,S({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:w=>i.$goPage(`/companies/${e.id}`),variant:"text"},t),{default:b(()=>[n(_,{size:"15"})]),_:2},1040,["onClick"]),n(g,S({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:w=>a(e.id)},t),{default:b(()=>[n(l,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},Y=O(X,[["__scopeId","data-v-360d4506"]]),Z={key:1},le={__name:"[id]",setup(y){const r=c(!1),t=N(),u=c([]),s=c(0),d=JSON.parse(localStorage.getItem("CategoryCompaniesQuery"))||{page:1,keyword:"",as:"",sort_by:""},a=c({page:d.page||1,limit:I,keyword:d.keyword}),i=e=>{u.value=e,l()};J(t,e=>{localStorage.setItem("CategoryCompaniesQuery",JSON.stringify(a.value))},{deep:!0,immediate:!0});const p=e=>{e&&(a.value.keyword="",a.value.page=1,localStorage.setItem("CategoryCompaniesQuery",JSON.stringify(a.value)),l())},_=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("CategoryCompaniesQuery",JSON.stringify(a.value)),l())},g=e=>{e&&(a.value.page=e,localStorage.setItem("CategoryCompaniesQuery",JSON.stringify(a.value)),l())},l=async()=>{const{data:e}=await z({id:t.params.id,...JSON.parse(localStorage.getItem("CategoryCompaniesQuery"))||a.value});console.log(JSON.parse(localStorage.getItem("CategoryCompaniesQuery")),a.value),u.value=e.data,s.value=e.count};return x(async()=>{r.value=!0,await l(),Math.ceil(s.value/I)==0&&(a.value.page=1,localStorage.setItem("CategoryCompaniesQuery",JSON.stringify(a.value))),r.value=!1}),(e,k)=>r.value?(m(),B(L,{key:0})):(m(),v("div",Z,[n(V,{path:`/participant-categories/add-company/${h(t).params.id}`,items:h(E),onFilter:p,onSearch:_,onSearchEmpty:_},null,8,["path","items"]),n(Y,{items:u.value,onDeleteItem:i,count:s.value},null,8,["items","count"]),n(D,{count:s.value,onSetPagination:g,page:a.value.page},null,8,["count","page"])]))}};export{le as default};
