import{ay as C,az as L}from"./admin.api.c4618457.js";import{l as P,a as B,_ as D}from"./Pagination.12ab80d4.js";import{r as c,o as d,g,w as t,c as b,y as F,F as Q,a as o,e,b as f,m as V,f as x,t as J,N as O,k as T}from"./entry.95095313.js";import{b as E}from"./BaseUrl.ad8812f8.js";import{L as j}from"./Loading.5d2fac71.js";const q=["src"],A={class:"d-flex justify-end mr-4 mt-n5 gap-2"},M={class:"text-h6"},U={__name:"NewsCard",props:{items:Array},emits:["delete-item"],setup(h,{emit:i}){const s=h,r=c([]),_=c(!1),n=async u=>{_.value=!0,await C({id:u}).then(p=>{r.value=s.items.filter(l=>l.id!==u),i("delete-item",r.value),_.value=!1})};return(u,p)=>{const l=O,a=o("FilePencilIcon"),v=o("v-avatar"),w=o("v-tooltip"),y=o("v-btn"),I=o("TrashIcon"),N=o("v-card-item"),k=o("v-card"),z=o("v-col"),$=o("v-row");return d(),g($,null,{default:t(()=>[(d(!0),b(Q,null,F(s.items,(m,S)=>(d(),g(z,{cols:"12",lg:"3",sm:"6",key:S},{default:t(()=>[e(k,{elevation:"10",class:"withbg store__card",rounded:"md"},{default:t(()=>[e(l,{to:`/news/${m.id}`},{default:t(()=>[f("img",{crossorigin:"anonymous",src:`${V(E).url_base}/${m.preview}`,style:{height:"200px",width:"100%"},class:"rounded-t-md",alt:"123"},null,8,q)]),_:2},1032,["to"]),f("div",A,[e(y,{to:`/news/${m.id}`,size:"40",icon:"",class:"bg-primary d-flex"},{default:t(()=>[e(v,{size:"30",class:"text-white"},{default:t(()=>[e(a,{size:"15"})]),_:1}),e(w,{activator:"parent",location:"bottom"},{default:t(()=>[x("Duzet")]),_:1})]),_:2},1032,["to"]),e(y,{size:"40",icon:"",class:"bg-error d-flex",onClick:H=>n(m.id),loading:_.value},{default:t(()=>[e(v,{size:"30",class:"text-white"},{default:t(()=>[e(I,{size:"15"})]),_:1}),e(w,{activator:"parent",location:"bottom"},{default:t(()=>[x("Poz")]),_:1})]),_:2},1032,["onClick","loading"])]),e(N,{class:"pt-0 d-flex"},{default:t(()=>[f("h6",M,J(m.titleEn),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}}},G={key:1},Z={__name:"index",setup(h){const i=c(!1),s=c([]),r=c(0),_=JSON.parse(localStorage.getItem("newsQuery"))||{page:1},n=c({page:_.page,limit:P}),u=a=>s.value=a,p=a=>{a&&(n.value.page=a,localStorage.setItem("newsQuery",JSON.stringify(n.value)),l())},l=async()=>{i.value=!0;const{data:a}=await L(JSON.parse(localStorage.getItem("newsQuery"))||n.value);s.value=a.data,r.value=a.count,i.value=!1};return T(async()=>{await l()}),(a,v)=>i.value?(d(),g(j,{key:0})):(d(),b("div",G,[e(D,{path:"/news/0","filter-visible":!1,"search-visible":!1}),e(U,{items:s.value,onDeleteItem:u},null,8,["items"]),e(B,{count:r.value,onSetPagination:p,page:n.value.page},null,8,["count","page"])]))}};export{Z as default};
