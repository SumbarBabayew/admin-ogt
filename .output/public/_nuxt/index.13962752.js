import{r,o as _,g as I,w as n,c as C,y as D,F as B,a,e as t,b as k,m as S,z as F,f as x,t as L,N as V,j,C as q,k as T}from"./entry.95095313.js";import{bk as M,bl as A}from"./admin.api.c4618457.js";import{b as R}from"./BaseUrl.ad8812f8.js";import{L as G}from"./Loading.5d2fac71.js";import{l as $,_ as H,a as K,p as W}from"./Pagination.12ab80d4.js";const X=["src"],Y={class:"d-flex justify-end mt-n5"},Z=["textContent"],ee={__name:"UpcomingEventCard",props:{items:Array},emits:["delete-item"],setup(b,{emit:m}){const c=b,i=r([]),l=r(!1),d=async e=>{l.value=!1,await M({id:e}).then(()=>{i.value=c.items.filter(p=>p.id!==e),m("delete-item",i.value)}),l.value=!1};return(e,p)=>{const g=V,f=a("DotsIcon"),y=a("v-btn"),s=a("v-list"),o=a("FilePencilIcon"),h=a("v-list-item-title"),w=a("v-list-item"),E=a("TrashIcon"),N=a("v-sheet"),U=a("v-menu"),P=a("v-card-item"),Q=a("v-card"),J=a("v-col"),O=a("v-row");return _(),I(O,null,{default:n(()=>[(_(!0),C(B,null,D(c.items,(u,z)=>(_(),I(J,{cols:"12",lg:"3",sm:"6",key:z},{default:n(()=>[t(Q,{elevation:"10",class:"withbg store__card",rounded:"md"},{default:n(()=>[t(g,{to:""},{default:n(()=>[k("img",{crossorigin:"anonymous",src:`${S(R).url_base}/${u.image}`,style:{height:"200px",width:"100%","object-fit":"contain"},class:"rounded-t-md",alt:"123"},null,8,X)]),_:2},1024),k("div",Y,[t(U,{"close-on-content-click":!1},{activator:n(({props:v})=>[t(y,F({size:"30",icon:"",class:"profileBtn bg-borderColor",variant:"text"},v),{default:n(()=>[t(f)]),_:2},1040)]),default:n(()=>[t(N,{rounded:"md",width:"200",elevation:"10",class:"mt-2"},{default:n(()=>[t(s,{class:"py-0",lines:"one",density:"compact",onClick:v=>e.$goPage(`/upcoming-events/features/${u.id}`,{})},null,8,["onClick"]),t(s,{class:"py-0",lines:"one",density:"compact",onClick:v=>e.$goPage(`/upcoming-events/${u.id}`,{})},{default:n(()=>[t(w,{value:"item2","active-color":"primary"},{prepend:n(()=>[t(o,{size:"20"})]),default:n(()=>[t(h,{class:"pl-4 text-body-1"},{default:n(()=>[x("Duzetmek")]),_:1})]),_:1})]),_:2},1032,["onClick"]),t(s,{class:"py-0",lines:"one",density:"compact",loading:S(l),onClick:v=>d(u.id)},{default:n(()=>[t(w,{value:"item2","active-color":"primary"},{prepend:n(()=>[t(E,{size:"20"})]),default:n(()=>[t(h,{class:"pl-4 text-body-1"},{default:n(()=>[x("Pozmak")]),_:1})]),_:1})]),_:2},1032,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),t(P,{class:"pt-0 d-flex"},{default:n(()=>[k("h6",{class:"text-h6",textContent:L(`${u.nameEn}`)},null,8,Z)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}}},te={key:1},ce={__name:"index",setup(b){const m=r(!1),c=j(),i=r([]),l=r(0),d=JSON.parse(localStorage.getItem("UpcomingEventsQuery"))||{page:1,keyword:""},e=r({page:d.page,keyword:d.keyword,limit:$}),p=o=>i.value=o;q(c,o=>{c.query.categoryId&&(e.value.categoryId=c.query.categoryId),localStorage.setItem("UpcomingEventsQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const g=o=>{o&&(e.value.keyword="",e.value.page=1,e.value.as=o.as,e.value.sort_by=o.sort_by,localStorage.setItem("UpcomingEventsQuery",JSON.stringify(e.value)),s())},f=o=>{o&&(e.value.keyword=o,e.value.page=1,localStorage.setItem("UpcomingEventsQuery",JSON.stringify(e.value)),s())},y=o=>{o&&(e.value.page=o,localStorage.setItem("UpcomingEventsQuery",JSON.stringify(e.value)),s())},s=async()=>{m.value=!0;const{data:o}=await A(JSON.parse(localStorage.getItem("UpcomingEventsQuery"))||e.value);i.value=o.data,l.value=o.count,m.value=!1};return T(async()=>{await s(),Math.ceil(l.value/$)==0&&(e.value.page=1,localStorage.setItem("UpcomingEventsQuery",JSON.stringify(e.value)))}),(o,h)=>m.value?(_(),I(G,{key:0})):(_(),C("div",te,[t(H,{path:"/upcoming-events/0",items:S(W),onFilter:g,onSearch:f},null,8,["items"]),t(ee,{items:i.value,onDeleteItem:p},null,8,["items"]),t(K,{count:l.value,onSetPagination:y,page:e.value.page},null,8,["count","page"])]))}};export{ce as default};
