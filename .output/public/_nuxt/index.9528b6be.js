import{r as i,o as m,g as w,w as a,c as C,y as B,F,a as s,e as t,b as h,m as x,z as V,f as S,t as T,N as j,j as E,C as M,k as A}from"./entry.95095313.js";import{b4 as R,n as U}from"./admin.api.c4618457.js";import{b as G}from"./BaseUrl.ad8812f8.js";import{L as H}from"./Loading.5d2fac71.js";import{l as $,_ as K,a as W,p as X}from"./Pagination.12ab80d4.js";const Y=["src"],Z={class:"d-flex justify-end mt-n5"},ee=["textContent"],te={__name:"SpeakerCard",props:{items:Array},emits:["delete-item"],setup(b,{emit:u}){const n=b,c=i([]),l=i(!1),d=async e=>{l.value=!1,await R({id:e}).then(()=>{c.value=n.items.filter(p=>p.id!==e),u("delete-item",c.value)}),l.value=!1};return(e,p)=>{const f=j,g=s("DotsIcon"),k=s("v-btn"),r=s("ListIcon"),o=s("v-list-item-title"),v=s("v-list-item"),I=s("v-list"),N=s("FilePencilIcon"),z=s("TrashIcon"),P=s("v-sheet"),Q=s("v-menu"),J=s("v-card-item"),L=s("v-card"),O=s("v-col"),D=s("v-row");return m(),w(D,null,{default:a(()=>[(m(!0),C(F,null,B(n.items,(_,q)=>(m(),w(O,{cols:"12",lg:"2",sm:"4",key:q},{default:a(()=>[t(L,{elevation:"10",class:"withbg store__card",rounded:"md"},{default:a(()=>[t(f,{to:""},{default:a(()=>[h("img",{crossorigin:"anonymous",src:`${x(G).url_base}/${_.image}`,style:{height:"200px",width:"100%"},class:"rounded-t-md",alt:"123"},null,8,Y)]),_:2},1024),h("div",Z,[t(Q,{"close-on-content-click":!1},{activator:a(({props:y})=>[t(k,V({size:"30",icon:"",class:"profileBtn bg-borderColor",variant:"text"},y),{default:a(()=>[t(g)]),_:2},1040)]),default:a(()=>[t(P,{rounded:"md",width:"200",elevation:"10",class:"mt-2"},{default:a(()=>[t(I,{class:"py-0",lines:"one",density:"compact",onClick:y=>e.$goPage(`/product/feature/${_.id}`,{})},{default:a(()=>[t(v,{value:"item2","active-color":"primary"},{prepend:a(()=>[t(r,{size:"20"})]),default:a(()=>[t(o,{class:"pl-4 text-body-1"},{default:a(()=>[S("Sazlamalary")]),_:1})]),_:1})]),_:2},1032,["onClick"]),t(I,{class:"py-0",lines:"one",density:"compact",onClick:y=>e.$goPage(`/speakers/${_.id}`,{})},{default:a(()=>[t(v,{value:"item2","active-color":"primary"},{prepend:a(()=>[t(N,{size:"20"})]),default:a(()=>[t(o,{class:"pl-4 text-body-1"},{default:a(()=>[S("Duzetmek")]),_:1})]),_:1})]),_:2},1032,["onClick"]),t(I,{class:"py-0",lines:"one",density:"compact",loading:x(l),onClick:y=>d(_.id)},{default:a(()=>[t(v,{value:"item2","active-color":"primary"},{prepend:a(()=>[t(z,{size:"20"})]),default:a(()=>[t(o,{class:"pl-4 text-body-1"},{default:a(()=>[S("Pozmak")]),_:1})]),_:1})]),_:2},1032,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),t(J,{class:"pt-0 d-flex"},{default:a(()=>[h("h6",{class:"text-h6",textContent:T(`${_.nameEn}`)},null,8,ee)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}}},ae={key:1},re={__name:"index",setup(b){const u=i(!1),n=E(),c=i([]),l=i(0),d=JSON.parse(localStorage.getItem("speakerQuery"))||{page:1,keyword:"",categoryId:n.query.categoryId||""},e=i({page:d.page,keyword:d.keyword,limit:$,categoryId:n.query.categoryId||""}),p=o=>c.value=o;M(n,o=>{n.query.categoryId&&(e.value.categoryId=n.query.categoryId),localStorage.setItem("speakerQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const f=o=>{o&&(e.value.keyword="",e.value.page=1,e.value.as=o.as,e.value.sort_by=o.sort_by,localStorage.setItem("speakerQuery",JSON.stringify(e.value)),r())},g=o=>{o&&(e.value.keyword=o,e.value.page=1,localStorage.setItem("speakerQuery",JSON.stringify(e.value)),r())},k=o=>{o&&(e.value.page=o,localStorage.setItem("speakerQuery",JSON.stringify(e.value)),r())},r=async()=>{u.value=!0;const{data:o}=await U(JSON.parse(localStorage.getItem("speakerQuery"))||e.value);c.value=o.data,l.value=o.count,u.value=!1};return A(async()=>{await r(),Math.ceil(l.value/$)==0&&(e.value.page=1,localStorage.setItem("speakerQuery",JSON.stringify(e.value)))}),(o,v)=>u.value?(m(),w(H,{key:0})):(m(),C("div",ae,[t(K,{path:"/speakers/0",items:x(X),onFilter:f,onSearch:g},null,8,["items"]),t(te,{items:c.value,onDeleteItem:p},null,8,["items"]),t(W,{count:l.value,onSetPagination:k,page:e.value.page},null,8,["count","page"])]))}};export{re as default};
