import{_ as w,r as u,o as _,c as g,b as n,t as m,F as T,y as $,s as C,a as p,e as t,w as h,z as b,j as x,C as Q,k as z,g as B,m as F}from"./entry.95095313.js";import{b0 as J,l as O}from"./admin.api.c4618457.js";import{L as P}from"./Loading.5d2fac71.js";import{l as I,_ as E,a as D,p as L}from"./Pagination.12ab80d4.js";const R={class:"container"},U={class:"count"},V={class:"responsive-table"},X=C('<li class="table-header" data-v-238e8c92><div class="col col-1" data-v-238e8c92>Title EN</div><div class="col col-2" data-v-238e8c92>Title RU</div><div class="col col-2" data-v-238e8c92>Title X</div><div class="col col-4" data-v-238e8c92>Functions</div></li>',1),M={class:"table-row"},j={class:"col col-1","data-label":"Title EN"},q={class:"col col-2","data-label":"Title RU"},A={class:"col col-2","data-label":"Title X"},G={class:"col col-4","data-label":"Functions"},H={__name:"SessionsTable",props:{items:Array,count:Number},emits:["delete-item"],setup(y,{emit:d}){const a=y,c=u([]),o=u(!1),i=async s=>{await J({id:s}).then(()=>{o.value=!0,c.value=a.items.filter(v=>v.id!==s),d("delete-item",c.value)}),o.value=!1};return(s,v)=>{const f=p("FilePencilIcon"),r=p("v-btn"),S=p("TrashIcon"),l=p("UsersIcon");return _(),g("div",null,[n("div",R,[n("span",U,"Sany ( "+m(a.count)+" )",1),n("ul",V,[X,(_(!0),g(T,null,$(y.items,(e,N)=>(_(),g("li",M,[n("div",j,m(e.nameEn),1),n("div",q,m(e.nameRu),1),n("div",A,m(e.nameX),1),n("div",G,[t(r,b({size:"30",title:"Edit",class:"profileBtn bg-primary custom-hover-primary",onClick:k=>s.$goPage(`/sessions/${e.id}`),variant:"text"},a),{default:h(()=>[t(f,{size:"15"})]),_:2},1040,["onClick"]),t(r,b({size:"30",title:"Delete",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:k=>i(e.id)},a),{default:h(()=>[t(S,{size:"15"})]),_:2},1040,["onClick"]),t(r,b({size:"25",title:"Speakers",class:"profileBtn bg-success custom-hover-primary",variant:"text",onClick:k=>s.$goPage(`/sessions/speakers/${e.id}`)},a),{default:h(()=>[t(l,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},K=w(H,[["__scopeId","data-v-238e8c92"]]),W={key:1},te={__name:"index",setup(y){const d=u(!1),a=x(),c=u([]),o=u(0),i=JSON.parse(localStorage.getItem("SessionsQuery"))||{page:1,keyword:"",as:"",sort_by:""},s=u({page:i.page||1,keyword:i.keyword,limit:I,as:i.as||"",sort_by:i.sort_by||""}),v=e=>{c.value=e,l()};Q(a,e=>{localStorage.setItem("SessionsQuery",JSON.stringify(s.value))},{deep:!0,immediate:!0});const f=e=>{e&&(s.value.keyword="",s.value.page=1,s.value.as=e.as,s.value.sort_by=e.sort_by,localStorage.setItem("SessionsQuery",JSON.stringify(s.value)),l())},r=e=>{e&&(s.value.keyword=e,s.value.page=1,localStorage.setItem("SessionsQuery",JSON.stringify(s.value)),l())},S=e=>{e&&(s.value.page=e,localStorage.setItem("SessionsQuery",JSON.stringify(s.value)),l())},l=async()=>{const{data:e}=await O(JSON.parse(localStorage.getItem("SessionsQuery"))||s.value);c.value=e.data,o.value=e.count};return z(async()=>{d.value=!0,await l(),Math.ceil(o.value/I)==0&&(s.value.page=1,localStorage.setItem("SessionsQuery",JSON.stringify(s.value))),d.value=!1}),(e,N)=>d.value?(_(),B(P,{key:0})):(_(),g("div",W,[t(E,{path:"/sessions/0",items:F(L),onFilter:f,onSearch:r,onSearchEmpty:r},null,8,["items"]),t(K,{items:c.value,onDeleteItem:v,count:o.value},null,8,["items","count"]),t(D,{count:o.value,onSetPagination:S,page:s.value.page},null,8,["count","page"])]))}};export{te as default};
