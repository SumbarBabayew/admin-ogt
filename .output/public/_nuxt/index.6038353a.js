import{_ as k,r,o as _,c as g,b as s,t as v,F as w,y as N,s as T,a as b,e as o,w as S,z as F,j as x,C as Q,k as $,g as C,m as D}from"./entry.95095313.js";import{E as J,F as O}from"./admin.api.c4618457.js";import{L as A}from"./Loading.5d2fac71.js";import{l as I,_ as B,a as P,p as z}from"./Pagination.12ab80d4.js";const E={class:"container"},L={class:"count"},V={class:"responsive-table"},M=T('<li class="table-header" data-v-cb192e28><div class="col col-1" data-v-cb192e28>Start</div><div class="col col-2" data-v-cb192e28>Destination</div><div class="col col-2" data-v-cb192e28>Departure Time</div><div class="col col-2" data-v-cb192e28>Arrival Time</div><div class="col col-2" data-v-cb192e28>Functions</div></li>',1),j={class:"table-row"},q={class:"col col-1","data-label":"Start"},R={class:"col col-2","data-label":"Destination"},G={class:"col col-2","data-label":"Departure Time"},H={class:"col col-2","data-label":"Arrival Time"},K={class:"col col-4","data-label":"Functions"},U={__name:"AvailableFlightTable",props:{items:Array,count:Number},emits:["delete-item"],setup(p,{emit:u}){const i=p,c=r([]),l=r(!1),n=async e=>{await J({id:e}).then(()=>{l.value=!0,c.value=i.items.filter(m=>m.id!==e),u("delete-item",c.value)}),l.value=!1};return(e,m)=>{const h=b("FilePencilIcon"),d=b("v-btn"),y=b("TrashIcon");return _(),g("div",null,[s("div",E,[s("span",L,"Sany ( "+v(i.count)+" )",1),s("ul",V,[M,(_(!0),g(w,null,N(p.items,(t,a)=>(_(),g("li",j,[s("div",q,v(t.start.nameEn),1),s("div",R,v(t.destination.nameEn),1),s("div",G,v(t.departureTime),1),s("div",H,v(t.landingTime),1),s("div",K,[o(d,F({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:f=>e.$goPage(`/available-flights/${t.id}`),variant:"text"},i),{default:S(()=>[o(h,{size:"15"})]),_:2},1040,["onClick"]),o(d,F({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:f=>n(t.id)},i),{default:S(()=>[o(y,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},W=k(U,[["__scopeId","data-v-cb192e28"]]),X={key:1},te={__name:"index",setup(p){const u=r(!1),i=x(),c=r([]),l=r(0),n=JSON.parse(localStorage.getItem("FlightsQuery"))||{page:1,keyword:"",as:"",sort_by:""},e=r({page:n.page||1,keyword:n.keyword,limit:I,as:n.as||"",sort_by:n.sort_by||""}),m=a=>{c.value=a,t()};Q(i,a=>{localStorage.setItem("FlightsQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const h=a=>{a&&(e.value.keyword="",e.value.page=1,e.value.as=a.as,e.value.sort_by=a.sort_by,localStorage.setItem("FlightsQuery",JSON.stringify(e.value)),t())},d=a=>{a&&(e.value.keyword=a,e.value.page=1,localStorage.setItem("FlightsQuery",JSON.stringify(e.value)),t())},y=a=>{a&&(e.value.page=a,localStorage.setItem("FlightsQuery",JSON.stringify(e.value)),t())},t=async()=>{const{data:a}=await O(JSON.parse(localStorage.getItem("FlightsQuery"))||e.value);c.value=a.data,l.value=a.count};return $(async()=>{u.value=!0,await t(),Math.ceil(l.value/I)==0&&(e.value.page=1,localStorage.setItem("FlightsQuery",JSON.stringify(e.value))),u.value=!1}),(a,f)=>u.value?(_(),C(A,{key:0})):(_(),g("div",X,[o(B,{path:"/available-flights/0",items:D(z),onFilter:h,onSearch:d,onSearchEmpty:d},null,8,["items"]),o(W,{items:c.value,onDeleteItem:m,count:l.value},null,8,["items","count"]),o(P,{count:l.value,onSetPagination:y,page:e.value.page},null,8,["count","page"])]))}};export{te as default};
