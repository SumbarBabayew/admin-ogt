import{_ as w,r as u,o as v,c as m,b as s,t as f,F as D,y as x,a as h,e as l,w as b,z as S,A as N,B as W,j as T,C as Q,k as $,g as B,m as C}from"./entry.95095313.js";import{bu as F,bv as J}from"./admin.api.c4618457.js";import{L as O}from"./Loading.5d2fac71.js";import{l as I,_ as P,a as z,p as E}from"./Pagination.12ab80d4.js";const L=o=>(N("data-v-dde9b15e"),o=o(),W(),o),R={class:"container"},V={class:"count"},A={class:"responsive-table"},M=L(()=>s("li",{class:"table-header"},[s("div",{class:"col col-1"},"Title EN"),s("div",{class:"col col-2"},"Title RU"),s("div",{class:"col col-4"},"Functions")],-1)),U={class:"table-row"},j={class:"col col-1","data-label":"Title EN"},q={class:"col col-2","data-label":"Title RU"},G={class:"col col-4","data-label":"Functions"},H={__name:"WarningDeskTable",props:{items:Array,count:Number},emits:["delete-item"],setup(o,{emit:d}){const c=o,i=u([]),n=u(!1),r=async e=>{await F({id:e}).then(()=>{n.value=!0,i.value=c.items.filter(g=>g.id!==e),d("delete-item",i.value)}),n.value=!1};return(e,g)=>{const p=h("FilePencilIcon"),_=h("v-btn"),y=h("TrashIcon");return v(),m("div",null,[s("div",R,[s("span",V,"Sany ( "+f(c.count)+" )",1),s("ul",A,[M,(v(!0),m(D,null,x(o.items,(a,t)=>(v(),m("li",U,[s("div",j,f(a.textEn),1),s("div",q,f(a.textRu),1),s("div",G,[l(_,S({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:k=>e.$goPage(`/warning-desk/${a.id}`),variant:"text"},c),{default:b(()=>[l(p,{size:"15"})]),_:2},1040,["onClick"]),l(_,S({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:k=>r(a.id)},c),{default:b(()=>[l(y,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},K=w(H,[["__scopeId","data-v-dde9b15e"]]),X={key:1},ae={__name:"index",setup(o){const d=u(!1),c=T(),i=u([]),n=u(0),r=JSON.parse(localStorage.getItem("WarningDeskQuery"))||{page:1,keyword:"",as:"",sort_by:""},e=u({page:r.page||1,keyword:r.keyword,limit:I,as:r.as||"",sort_by:r.sort_by||""}),g=t=>{i.value=t,a()};Q(c,t=>{localStorage.setItem("WarningDeskQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const p=t=>{t&&(e.value.keyword="",e.value.page=1,e.value.as=t.as,e.value.sort_by=t.sort_by,localStorage.setItem("WarningDeskQuery",JSON.stringify(e.value)),a())},_=t=>{t&&(e.value.keyword=t,e.value.page=1,localStorage.setItem("WarningDeskQuery",JSON.stringify(e.value)),a())},y=t=>{t&&(e.value.page=t,localStorage.setItem("WarningDeskQuery",JSON.stringify(e.value)),a())},a=async()=>{const{data:t}=await J(JSON.parse(localStorage.getItem("WarningDeskQuery"))||e.value);i.value=t.data,n.value=t.count};return $(async()=>{d.value=!0,await a(),Math.ceil(n.value/I)==0&&(e.value.page=1,localStorage.setItem("WarningDeskQuery",JSON.stringify(e.value))),d.value=!1}),(t,k)=>d.value?(v(),B(O,{key:0})):(v(),m("div",X,[l(P,{path:"/warning-desk/0",items:C(E),onFilter:p,onSearch:_,onSearchEmpty:_},null,8,["items"]),l(K,{items:i.value,onDeleteItem:g,count:n.value},null,8,["items","count"]),l(z,{count:n.value,onSetPagination:y,page:e.value.page},null,8,["count","page"])]))}};export{ae as default};
