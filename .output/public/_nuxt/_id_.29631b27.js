import{_ as I,r as i,o as d,c as p,b as t,t as h,F as N,y as F,s as k,a as b,m as f,e as m,w,z as H,j as Q,C as x,k as J,g as O}from"./entry.95095313.js";import{ar as B,as as C}from"./admin.api.c4618457.js";import{b as E}from"./BaseUrl.ad8812f8.js";import{L as T}from"./Loading.5d2fac71.js";import{l as S,_ as $,a as L,p as R}from"./Pagination.12ab80d4.js";const V={class:"container"},z={class:"count"},D={class:"responsive-table"},P=k('<li class="table-header" data-v-644cbe12><div class="col col-1" data-v-644cbe12>Image</div><div class="col col-1" data-v-644cbe12>Name EN</div><div class="col col-2" data-v-644cbe12>Name RU</div><div class="col col-4" data-v-644cbe12>Functions</div></li>',1),U={class:"table-row"},M={class:"col col-2","data-label":"Image"},j=["src"],q={class:"col col-1","data-label":"Name EN"},A={class:"col col-2","data-label":"Name RU"},G={class:"col col-4","data-label":"Functions"},K={__name:"HotelFeaturesTable",props:{items:Array,count:Number,chatroom:Number},emits:["delete-item"],setup(g,{emit:u}){const s=g,l=i([]),o=i(!1),c=async e=>{await B({id:e}).then(()=>{o.value=!0,l.value=s.items.filter(_=>_.id!==e),u("delete-item",l.value)}),o.value=!1};return(e,_)=>{const y=b("TrashIcon"),v=b("v-btn");return d(),p("div",null,[t("div",V,[t("span",z,"Sany ( "+h(s.count)+" )",1),t("ul",D,[P,(d(!0),p(N,null,F(g.items,(r,n)=>(d(),p("li",U,[t("div",M,[t("img",{crossorigin:"anonymous",class:"image",src:f(E).url_base+"/"+r.icon},null,8,j)]),t("div",q,h(r.nameEn),1),t("div",A,h(r.nameRu),1),t("div",G,[m(v,H({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:a=>c(r.id)},s),{default:w(()=>[m(y,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},W=I(K,[["__scopeId","data-v-644cbe12"]]),X={key:1},oe={__name:"[id]",setup(g){const u=i(!1),s=Q(),l=i([]),o=i(0),c=JSON.parse(localStorage.getItem("HotelFeaturesQuery"))||{page:1,keyword:"",as:"",sort_by:"",hotelId:""},e=i({page:c.page||1,keyword:c.keyword,limit:S,as:c.as||"",sort_by:c.sort_by||"",hotelId:""}),_=a=>{l.value=a,n()};x(s,a=>{localStorage.setItem("HotelFeaturesQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const y=a=>{a&&(e.value.keyword="",e.value.page=1,e.value.as=a.as,e.value.sort_by=a.sort_by,localStorage.setItem("HotelFeaturesQuery",JSON.stringify(e.value)),n())},v=a=>{a&&(e.value.keyword=a,e.value.page=1,localStorage.setItem("HotelFeaturesQuery",JSON.stringify(e.value)),n())},r=a=>{a&&(e.value.page=a,localStorage.setItem("HotelFeaturesQuery",JSON.stringify(e.value)),n())},n=async()=>{const{data:a}=await C({hotelId:s.params.id},JSON.parse(localStorage.getItem("HotelFeaturesQuery"))||e.value);l.value=a.data,o.value=a.count};return J(async()=>{u.value=!0,await n(),Math.ceil(o.value/S)==0&&(e.value.page=1,localStorage.setItem("HotelFeaturesQuery",JSON.stringify(e.value))),u.value=!1}),(a,Y)=>u.value?(d(),O(T,{key:0})):(d(),p("div",X,[m($,{path:"/hotels/features/add/",items:f(R),onFilter:y,onSearch:v,onSearchEmpty:v},null,8,["items"]),m(W,{items:l.value,onDeleteItem:_,count:o.value,chatroom:f(s).params.id},null,8,["items","count","chatroom"]),m(L,{count:o.value,onSetPagination:r,page:e.value.page},null,8,["count","page"])]))}};export{oe as default};
