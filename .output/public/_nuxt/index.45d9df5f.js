import{_ as w,r as n,o as m,c as p,b as s,t as c,F as R,y as x,s as Q,a as F,e as i,w as k,z as q,j as $,C,k as J,g as O}from"./entry.95095313.js";import{ac as P,a as B,ad as D}from"./admin.api.c4618457.js";import{L as E}from"./Loading.5d2fac71.js";import{l as N,_ as L,a as z}from"./Pagination.12ab80d4.js";const V={class:"container"},A={class:"count"},M={class:"responsive-table"},T=Q('<li class="table-header" data-v-d86f2ca5><div class="col col-1" data-v-d86f2ca5>Firstname</div><div class="col col-2" data-v-d86f2ca5>Lastname</div><div class="col col-2" data-v-d86f2ca5>Event</div><div class="col col-2" data-v-d86f2ca5>Nationality</div><div class="col col-2" data-v-d86f2ca5>Start</div><div class="col col-2" data-v-d86f2ca5>Destination</div><div class="col col-4" data-v-d86f2ca5>Functions</div></li>',1),j={class:"table-row"},G={class:"col col-1","data-label":"Firstname"},H={class:"col col-2","data-label":"Lastname"},K={class:"col col-2","data-label":"Passport",style:{color:"green"}},U={class:"col col-2","data-label":"Nationality"},W={class:"col col-2","data-label":"Start"},X={class:"col col-2","data-label":"Destination"},Y={class:"col col-4","data-label":"Functions"},Z={__name:"FlightRequest",props:{items:Array,count:Number},emits:["delete-item"],setup(y,{emit:v}){const r=y,d=n([]),l=n(!1),g=async u=>{await P({id:u}).then(()=>{l.value=!0,d.value=r.items.filter(_=>_.id!==u),v("delete-item",d.value)}),l.value=!1};return(u,_)=>{const t=F("FilePencilIcon"),f=F("v-btn"),S=F("TrashIcon");return m(),p("div",null,[s("div",V,[s("span",A,"Sany ( "+c(r.count)+" )",1),s("ul",M,[T,(m(!0),p(R,null,x(y.items,(a,I)=>(m(),p("li",j,[s("div",G,c(a.firstName),1),s("div",H,c(a.lastName),1),s("div",K,c(a.event!=null?a.event.name:""),1),s("div",U,c(a.nationality),1),s("div",W,c(a.flight.start.nameEn),1),s("div",X,c(a.flight.destination.nameEn),1),s("div",Y,[i(f,q({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:o=>u.$goPage(`/flight-request/${a.id}`),variant:"text"},r),{default:k(()=>[i(t,{size:"15"})]),_:2},1040,["onClick"]),i(f,q({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:o=>g(a.id)},r),{default:k(()=>[i(S,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},ee=w(Z,[["__scopeId","data-v-d86f2ca5"]]),te={key:1},ce={__name:"index",setup(y){const v=n(!1),r=$(),d=n([]),l=n(0),g=n([]),u=async()=>{const e=await B({limit:100});var h=[];h.push({name:"All",value:{eventId:""}});for(var b of e.data.data)h.push({name:b.name,value:{eventId:b.id}});g.value=h},_=JSON.parse(localStorage.getItem("FlightRequestQuery"))||{page:1,keyword:""},t=n({page:_.page||1,keyword:_.keyword,limit:N}),f=e=>{d.value=e,o()};C(r,e=>{localStorage.setItem("FlightRequestQuery",JSON.stringify(t.value))},{deep:!0,immediate:!0});const S=e=>{e&&(t.value.keyword="",t.value.page=1,t.value.eventId=e.eventId,localStorage.setItem("FlightRequestQuery",JSON.stringify(t.value)),o())},a=e=>{e&&(t.value.keyword=e,t.value.page=1,localStorage.setItem("FlightRequestQuery",JSON.stringify(t.value)),o())},I=e=>{e&&(t.value.page=e,localStorage.setItem("FlightRequestQuery",JSON.stringify(t.value)),o())},o=async()=>{const{data:e}=await D(JSON.parse(localStorage.getItem("FlightRequestQuery"))||t.value);d.value=e.data,l.value=e.count};return J(async()=>{v.value=!0,await u(),await o(),Math.ceil(l.value/N)==0&&(t.value.page=1,localStorage.setItem("FlightRequestQuery",JSON.stringify(t.value))),v.value=!1}),(e,h)=>v.value?(m(),O(E,{key:0})):(m(),p("div",te,[i(L,{path:"/flight-request/0",items:g.value,onFilter:S,onSearch:a,onSearchEmpty:a},null,8,["items"]),i(ee,{items:d.value,onDeleteItem:f,count:l.value},null,8,["items","count"]),i(z,{count:l.value,onSetPagination:I,page:t.value.page},null,8,["count","page"])]))}};export{ce as default};
