import{r as l,j as d,C as S,k as _,g as h,c as k,e as i,m as c,o as p}from"./entry.95095313.js";import{n as I}from"./admin.api.c4618457.js";import{S as w}from"./SessionSpeakersTable.24a18ca5.js";import{L as C}from"./Loading.5d2fac71.js";import{l as g,_ as N,a as Q,p as J}from"./Pagination.12ab80d4.js";import"./BaseUrl.ad8812f8.js";const O={key:1},M={__name:"[id]",setup(U){const u=l(!1),o=d(),n=l([]),s=l(0),r=JSON.parse(localStorage.getItem("ChatroomUsersQuery"))||{page:1,keyword:"",as:"",sort_by:""},a=l({page:r.page||1,keyword:r.keyword,limit:g,as:r.as||"",sort_by:r.sort_by||""}),y=e=>{n.value=e,t()};S(o,e=>{localStorage.setItem("ChatroomUsersQuery",JSON.stringify(a.value))},{deep:!0,immediate:!0});const v=e=>{e&&(a.value.keyword="",a.value.page=1,a.value.as=e.as,a.value.sort_by=e.sort_by,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(a.value)),t())},m=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(a.value)),t())},f=e=>{e&&(a.value.page=e,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(a.value)),t())},t=async()=>{const{data:e}=await I({sessionId:o.params.id},JSON.parse(localStorage.getItem("ChatroomUsersQuery"))||a.value);n.value=e.data,s.value=e.count};return _(async()=>{u.value=!0,await t(),Math.ceil(s.value/g)==0&&(a.value.page=1,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(a.value))),u.value=!1}),(e,b)=>u.value?(p(),h(C,{key:0})):(p(),k("div",O,[i(N,{path:`/sessions/add-speaker/${c(o).params.id}`,items:c(J),onFilter:v,onSearch:m,onSearchEmpty:m},null,8,["path","items"]),i(w,{items:n.value,onDeleteItem:y,count:s.value,chatroom:c(o).params.id},null,8,["items","count","chatroom"]),i(Q,{count:s.value,onSetPagination:f,page:a.value.page},null,8,["count","page"])]))}};export{M as default};
