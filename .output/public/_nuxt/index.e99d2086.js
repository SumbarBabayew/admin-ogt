import{_ as w,r as u,o as m,c as p,b as t,t as h,F as $,y as P,s as x,a as v,m as k,e as s,w as b,z as C,j as Q,C as z,k as B,g as F}from"./entry.95095313.js";import{T as J,U as O}from"./admin.api.c4618457.js";import{b as T}from"./BaseUrl.ad8812f8.js";import{L as U}from"./Loading.5d2fac71.js";import{l as S,_ as L,a as V,c as D}from"./Pagination.12ab80d4.js";const E={class:"container"},M={class:"count"},W={class:"responsive-table"},j=x('<li class="table-header" data-v-1afd0a4c><div class="col col-1" data-v-1afd0a4c>Image</div><div class="col col-2" data-v-1afd0a4c>Name</div><div class="col col-2" data-v-1afd0a4c>Website</div><div class="col col-4" data-v-1afd0a4c>Functions</div></li>',1),q={class:"table-row"},A={class:"col col-1","data-label":"Name"},R={class:"col col-2","data-label":"Image"},G=["src"],H={class:"col col-2","data-label":"Name"},K={class:"col col-2","data-label":"Website"},X={class:"col col-4","data-label":"Functions"},Y={__name:"CompaniesTable",props:{items:Array,count:Number},emits:["delete-item"],setup(g,{emit:d}){const o=g,c=u([]),l=u(!1),i=async a=>{await J({id:a}).then(()=>{l.value=!0,c.value=o.items.filter(_=>_.id!==a),d("delete-item",c.value)}),l.value=!1};return(a,_)=>{const f=v("FilePencilIcon"),r=v("v-btn"),y=v("TrashIcon"),n=v("UsersIcon");return m(),p("div",null,[t("div",E,[t("span",M,"Sany ( "+h(o.count)+" )",1),t("ul",W,[j,(m(!0),p($,null,P(g.items,(e,N)=>(m(),p("li",q,[t("div",A,[t("div",R,[t("img",{crossorigin:"anonymous",class:"image",src:k(T).url_base+"/"+e.image},null,8,G)])]),t("div",H,h(e.nameEn),1),t("div",K,h(e.siteUrl),1),t("div",X,[s(r,C({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:I=>a.$goPage(`/companies/${e.id}`),variant:"text"},o),{default:b(()=>[s(f,{size:"15"})]),_:2},1040,["onClick"]),s(r,C({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:I=>i(e.id)},o),{default:b(()=>[s(y,{size:"15"})]),_:2},1040,["onClick"]),s(r,C({size:"25",class:"profileBtn bg-success custom-hover-primary",variant:"text",onClick:I=>a.$goPage(`/companies/speakers/${e.id}`)},o),{default:b(()=>[s(n,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},Z=w(Y,[["__scopeId","data-v-1afd0a4c"]]),ee={key:1},ne={__name:"index",setup(g){const d=u(!1),o=Q(),c=u([]),l=u(0),i=JSON.parse(localStorage.getItem("CompaniesQuery"))||{page:1,keyword:"",as:"",sort_by:""},a=u({page:i.page||1,keyword:i.keyword,limit:S,as:i.as||"",sort_by:i.sort_by||""}),_=e=>{c.value=e,n()};z(o,e=>{localStorage.setItem("CompaniesQuery",JSON.stringify(a.value))},{deep:!0,immediate:!0});const f=e=>{e&&(a.value.keyword="",a.value.page=1,a.value.as=e.as,a.value.sort_by=e.sort_by,localStorage.setItem("CompaniesQuery",JSON.stringify(a.value)),n())},r=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("CompaniesQuery",JSON.stringify(a.value)),n())},y=e=>{e&&(a.value.page=e,localStorage.setItem("CompaniesQuery",JSON.stringify(a.value)),n())},n=async()=>{const{data:e}=await O(JSON.parse(localStorage.getItem("CompaniesQuery"))||a.value);c.value=e.data,l.value=e.count};return B(async()=>{d.value=!0,await n(),Math.ceil(l.value/S)==0&&(a.value.page=1,localStorage.setItem("CompaniesQuery",JSON.stringify(a.value))),d.value=!1}),(e,N)=>d.value?(m(),F(U,{key:0})):(m(),p("div",ee,[s(L,{path:"/companies/0",items:k(D),onFilter:f,onSearch:r,onSearchEmpty:r},null,8,["items"]),s(Z,{items:c.value,onDeleteItem:_,count:l.value},null,8,["items","count"]),s(V,{count:l.value,onSetPagination:y,page:a.value.page},null,8,["count","page"])]))}};export{ne as default};
