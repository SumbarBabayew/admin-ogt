import{M as i}from"./MTextField.5144c562.js";import{aV as j,f as D,aW as y,aX as x}from"./admin.api.c4618457.js";import{i as N,j as C,r as m,k as H,g as z,c as F,e as l,w as o,a as r,o as w,b as _,f as M,t as E,m as c}from"./entry.95095313.js";import{L}from"./Loading.5d2fac71.js";import{_ as $}from"./MImageUpload.7346563c.js";import"./index.3e494a7b.js";import"./file-saver.3ee51bdb.js";/* empty css                       */import"./BaseUrl.ad8812f8.js";const q={key:1,class:"mx-3"},W={class:"d-flex align-center justify-space-between pt-sm-2"},G={class:"d-flex justify-end pb-3"},J={class:"mr-2"},ue={__name:"index",setup(K){const g=N(),s=C(),u=m(!1),p=m(!1),f=m(!1),v=m([]),I=n=>{v.value=n},e=m({nameEn:null,nameRu:null,nameX:null,aboutEn:null,aboutRu:null,aboutX:null,price:null,hotelId:null,images:[]}),b=m([]),R=async()=>{const n=await D({limit:100});b.value=n.data},h=async()=>{let n=m([]);if(!e.value.nameEn||!e.value.nameRu)return u.value=!0;f.value=!0,s.params.id==0?await y({data:e.value,id:s.params.id}).then(async a=>{await x({id:a.data.id,data:{files:v.value}}),g.go(-1)}).catch(a=>{console.log(a)}):(e.value.images.filter(a=>{a[0]!="d"&&n.value.push(a)}),e.value.images=n.value,await y({data:e.value,id:s.params.id}).then(async()=>{typeof v.value[0]=="object"&&(e.value.images.forEach(a=>v.value.unshift(a)),await x({id:s.params.id,data:{files:v.value}})),f.value=!1}))};return H(async()=>{if(await R(),s.params.id!=0){p.value=!0;const{data:n}=await j({id:s.params.id});e.value=n,p.value=!1}}),(n,a)=>{const k=r("v-card-title"),U=r("ArrowBackUpIcon"),X=r("v-avatar"),V=r("v-btn"),d=r("v-col"),A=r("v-select"),B=r("v-row"),S=r("v-card-item"),P=r("ScriptPlusIcon"),T=r("v-card");return p.value?(w(),z(L,{key:0})):(w(),F("div",q,[l(T,{elevation:"10",class:"withbg"},{default:o(()=>[l(S,null,{default:o(()=>[_("div",W,[l(k,{class:"text-h5"},{default:o(()=>[M(E(c(s).params.id==0?"Add":"Edit")+" session",1)]),_:1}),l(V,{size:"large",icon:"",class:"bg-primary",onClick:a[0]||(a[0]=t=>c(g).go(-1))},{default:o(()=>[l(X,{size:"large",class:"text-white"},{default:o(()=>[l(U,{size:"25"})]),_:1})]),_:1})]),l(B,{class:"mt-3"},{default:o(()=>[l(d,{cols:"6",lg:"4"},{default:o(()=>[l(i,{type:"text",label:"Title EN",error:!e.value.nameEn&&u.value,modelValue:e.value.nameEn,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.nameEn=t)},null,8,["error","modelValue"])]),_:1}),l(d,{cols:"6",lg:"4"},{default:o(()=>[l(i,{type:"text",label:"Title RU",error:!e.value.nameRu&&u.value,modelValue:e.value.nameRu,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.nameRu=t)},null,8,["error","modelValue"])]),_:1}),l(d,{cols:"6",lg:"4"},{default:o(()=>[l(i,{type:"text",label:"Title X",error:!e.value.nameX&&u.value,modelValue:e.value.nameX,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.nameX=t)},null,8,["error","modelValue"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(i,{type:"text",label:"About EN",error:!e.value.aboutEn&&u.value,modelValue:e.value.aboutEn,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.aboutEn=t)},null,8,["error","modelValue"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(i,{type:"text",label:"About RU",error:!e.value.aboutRu&&u.value,modelValue:e.value.aboutRu,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.aboutRu=t)},null,8,["error","modelValue"])]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(i,{type:"text",label:"About X",error:!e.value.aboutX&&u.value,modelValue:e.value.aboutX,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.aboutX=t)},null,8,["error","modelValue"])]),_:1}),l(d,{cols:"4"},{default:o(()=>[l(i,{type:"text",label:"Price",error:!e.value.price&&u.value,modelValue:e.value.price,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.price=t)},null,8,["error","modelValue"])]),_:1}),l(d,{cols:"12",lg:"12",sm:"13"},{default:o(()=>[l(A,{label:"Select hotel",items:b.value.data,error:!e.value.hotelId&&u.value,required:"","item-title":"nameEn",modelValue:e.value.hotelId,"onUpdate:modelValue":a[8]||(a[8]=t=>e.value.hotelId=t),"item-value":"id",variant:"outlined","return-object":!1},null,8,["items","error","modelValue"])]),_:1}),l(d,{cols:"12",lg:"12",sm:"13"},{default:o(()=>[l($,{error:u.value&&e.value.images.length==0,selectedFile:e.value.images,photoSrc:{type:"array",value:e.value.images},type:"gallery",onPhotoPath:I,multiple:!0,deleteImageById:c(s).params.id,placeholder:"Suratlar",width:"108px",height:"100px"},null,8,["error","selectedFile","photoSrc","deleteImageById"])]),_:1})]),_:1})]),_:1}),_("div",G,[l(V,{class:"profileBtn bg-primary custom-hover-primary",variant:"text",loading:f.value,onClick:h},{default:o(()=>[_("span",J,E(c(s).params.id==0?"Add":"Edit")+" room ",1),l(P)]),_:1},8,["loading"])])]),_:1})]))}}};export{ue as default};
