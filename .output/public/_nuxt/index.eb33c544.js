import{_ as T,r as c,o as u,c as h,b as s,t as d,F as w,y as O,s as x,a as f,e as o,w as k,z as N,g as C,l as B,j as E,C as Q,k as z}from"./entry.95095313.js";import{p as F,a as J,q as P}from"./admin.api.c4618457.js";import{L as V}from"./Loading.5d2fac71.js";import{l as $,_ as D,a as L}from"./Pagination.12ab80d4.js";const U={class:"container"},R={class:"count"},q={class:"responsive-table"},M=x('<li class="table-header" data-v-9d000cb4><div class="col col-1" data-v-9d000cb4>Order</div><div class="col col-1" data-v-9d000cb4>Title EN</div><div class="col col-2" data-v-9d000cb4>Title RU</div><div class="col col-2" data-v-9d000cb4>Title X</div><div class="col col-1" data-v-9d000cb4>Event</div><div class="col col-4" data-v-9d000cb4>Functions</div></li>',1),j={class:"table-row"},X={class:"col col-1","data-label":"Order"},G={class:"col col-1","data-label":"Title"},H={class:"col col-2","data-label":"Time RU"},K={class:"col col-2","data-label":"Is break"},W={class:"col col-1","data-label":"Event"},Y={class:"col col-4","data-label":"Functions"},Z={__name:"AgendasTable",props:{items:Array,count:Number},emits:["delete-item"],setup(y,{emit:v}){const n=y,i=c([]),l=c(!1),m=async a=>{await F({id:a}).then(()=>{l.value=!0,i.value=n.items.filter(_=>_.id!==a),v("delete-item",i.value)}),l.value=!1};return(a,_)=>{const b=f("FilePencilIcon"),g=f("v-btn"),I=f("UsersIcon"),p=f("TrashIcon");return u(),h("div",null,[s("div",U,[s("span",R,"Sany ( "+d(n.count)+" )",1),s("ul",q,[M,(u(!0),h(w,null,O(y.items,(t,r)=>(u(),h("li",j,[s("div",X,d(t.orderNumber),1),s("div",G,d(t.session!=null?t.session.nameEn:t.breakEn),1),s("div",H,d(t.time),1),s("div",K,d(t.isBreak),1),s("div",W,d(t.event!=null?t.event.name:""),1),s("div",Y,[o(g,N({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:e=>a.$goPage(`/agenda/${t.id}`),variant:"text"},n),{default:k(()=>[o(b,{size:"15"})]),_:2},1040,["onClick"]),t.session!=null?(u(),C(g,N({key:0,size:"25",class:"profileBtn bg-success custom-hover-primary",variant:"text",onClick:e=>a.$goPage(`/sessions/speakers/${t.id}`)},n),{default:k(()=>[o(I,{size:"15"})]),_:2},1040,["onClick"])):B("",!0),o(g,N({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:e=>m(t.id)},n),{default:k(()=>[o(p,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},ee=T(Z,[["__scopeId","data-v-9d000cb4"]]),ae={key:1},le={__name:"index",setup(y){const v=c(!1),n=E(),i=c([]),l=c(0),m=JSON.parse(localStorage.getItem("AgendasQuery"))||{page:1,eventId:""},a=c({eventId:m.eventId,page:m.page||1,limit:$}),_=c([]),b=async()=>{const e=await J({limit:100});var S=[];for(var A of e.data.data)S.push({name:A.name,value:{eventId:A.id}});_.value=S},g=e=>{i.value=e,r()};Q(n,e=>{localStorage.setItem("AgendasQuery",JSON.stringify(a.value))},{deep:!0,immediate:!0});const I=e=>{e&&(a.value.page=1,a.value.eventId=e.eventId,localStorage.setItem("AgendasQuery",JSON.stringify(a.value)),r())},p=e=>{e&&(a.value.page=1,localStorage.setItem("AgendasQuery",JSON.stringify(a.value)),r())},t=e=>{e&&(a.value.page=e,localStorage.setItem("AgendasQuery",JSON.stringify(a.value)),r())},r=async()=>{const{data:e}=await P(JSON.parse(localStorage.getItem("AgendasQuery"))||a.value);i.value=e.data,l.value=e.count};return z(async()=>{v.value=!0,await r(),await b(),Math.ceil(l.value/$)==0&&(a.value.page=1,localStorage.setItem("AgendasQuery",JSON.stringify(a.value))),v.value=!1}),(e,S)=>v.value?(u(),C(V,{key:0})):(u(),h("div",ae,[o(D,{path:"/agenda/0",items:_.value,onFilter:I,onSearch:p,onSearchEmpty:p},null,8,["items"]),o(ee,{items:i.value,onDeleteItem:g,count:l.value},null,8,["items","count"]),o(L,{count:l.value,onSetPagination:t,page:a.value.page},null,8,["count","page"])]))}};export{le as default};
