import{u as N,v as $}from"./admin.api.c4618457.js";import{l as C,a as P,_ as Q}from"./Pagination.12ab80d4.js";import{r as _,o as u,g,w as o,c as k,y as A,F as B,a as s,e as t,b as h,t as D,f as w,k as F}from"./entry.95095313.js";import{L as J}from"./Loading.5d2fac71.js";const O={class:"text-h6"},V={class:"d-flex justify-end mr-4 pb-1 gap-2"},L={__name:"AirportCard",props:{items:Array},emits:["delete-item"],setup(y,{emit:c}){const n=y,l=_([]),m=async a=>{await N({id:a}).then(p=>{l.value=n.items.filter(i=>i.id!==a),c("delete-item",l.value)})};return(a,p)=>{const i=s("v-card-item"),d=s("FilePencilIcon"),r=s("v-avatar"),e=s("v-tooltip"),v=s("v-btn"),x=s("TrashIcon"),I=s("v-card"),S=s("v-col"),b=s("v-row");return u(),g(b,null,{default:o(()=>[(u(!0),k(B,null,A(n.items,(f,z)=>(u(),g(S,{cols:"12",lg:"3",sm:"6",key:z},{default:o(()=>[t(I,{elevation:"10",class:"withbg store__card",rounded:"md"},{default:o(()=>[t(i,{class:"pt-1 d-flex"},{default:o(()=>[h("h6",O,D(f.nameEn),1)]),_:2},1024),h("div",V,[t(v,{to:`/airports/${f.id}`,size:"40",icon:"",class:"bg-primary d-flex"},{default:o(()=>[t(r,{size:"30",class:"text-white"},{default:o(()=>[t(d,{size:"15"})]),_:1}),t(e,{activator:"parent",location:"bottom"},{default:o(()=>[w("Duzet ")]),_:1})]),_:2},1032,["to"]),t(v,{size:"40",icon:"",class:"bg-error d-flex",onClick:E=>m(f.id)},{default:o(()=>[t(r,{size:"30",class:"text-white"},{default:o(()=>[t(x,{size:"15"})]),_:1}),t(e,{activator:"parent",location:"bottom"},{default:o(()=>[w("Poz ")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})}}},T={key:1},H={__name:"index",setup(y){const c=_(!1),n=_([]),l=_(0),m=JSON.parse(localStorage.getItem("airportsQuery"))||{page:1,keyword:""},a=_({page:m.page,keyword:m.keyword,limit:C}),p=e=>n.value=e,i=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("airportsQuery",JSON.stringify(a.value)),r())},d=e=>{e&&(a.value.page=e,localStorage.setItem("airportsQuery",JSON.stringify(a.value)),r())},r=async()=>{c.value=!0;const{data:e}=await $(JSON.parse(localStorage.getItem("airportsQuery"))||a.value);n.value=e.data,l.value=e.count,c.value=!1};return F(async()=>await r()),(e,v)=>c.value?(u(),g(J,{key:0})):(u(),k("div",T,[t(Q,{path:"/airports/0",onSearch:i,"filter-visible":!1}),t(L,{items:n.value,onDeleteItem:p},null,8,["items"]),t(P,{count:l.value,onSetPagination:d,page:a.value.page},null,8,["count","page"])]))}};export{H as default};
