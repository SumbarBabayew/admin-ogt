import{r,o as m,g as w,w as o,c as C,y as L,F as V,a as s,e as t,b as k,m as x,z as q,f as S,t as H,N as T,j,C as E,k as M}from"./entry.95095313.js";import{au as A,f as R}from"./admin.api.c4618457.js";import{b as U}from"./BaseUrl.ad8812f8.js";import{L as G}from"./Loading.5d2fac71.js";import{l as $,_ as K,a as W,p as X}from"./Pagination.12ab80d4.js";const Y=["src"],Z={class:"d-flex justify-end mt-n5"},ee=["textContent"],te={__name:"HotelCard",props:{items:Array},emits:["delete-item"],setup(b,{emit:u}){const l=b,c=r([]),n=r(!1),d=async e=>{n.value=!1,await A({id:e}).then(()=>{c.value=l.items.filter(p=>p.id!==e),u("delete-item",c.value)}),n.value=!1};return(e,p)=>{const g=T,y=s("DotsIcon"),h=s("v-btn"),i=s("DoorIcon"),a=s("v-list-item-title"),v=s("v-list-item"),I=s("v-list"),N=s("FilePencilIcon"),D=s("TrashIcon"),P=s("v-sheet"),Q=s("v-menu"),z=s("v-card-item"),J=s("v-card"),O=s("v-col"),F=s("v-row");return m(),w(F,null,{default:o(()=>[(m(!0),C(V,null,L(l.items,(_,B)=>(m(),w(O,{cols:"12",lg:"3",sm:"6",key:B},{default:o(()=>[t(J,{elevation:"10",class:"withbg store__card",rounded:"md"},{default:o(()=>[t(g,{to:""},{default:o(()=>[k("img",{crossorigin:"anonymous",src:`${x(U).url_base}/${_.image}`,style:{height:"200px",width:"100%"},class:"rounded-t-md",alt:"123"},null,8,Y)]),_:2},1024),k("div",Z,[t(Q,{"close-on-content-click":!1},{activator:o(({props:f})=>[t(h,q({size:"30",icon:"",class:"profileBtn bg-borderColor",variant:"text"},f),{default:o(()=>[t(y)]),_:2},1040)]),default:o(()=>[t(P,{rounded:"md",width:"200",elevation:"10",class:"mt-2"},{default:o(()=>[t(I,{class:"py-0",lines:"one",density:"compact",onClick:f=>e.$goPage(`/hotels/features/${_.id}`,{})},{default:o(()=>[t(v,{value:"item2","active-color":"primary"},{prepend:o(()=>[t(i,{size:"20"})]),default:o(()=>[t(a,{class:"pl-4 text-body-1"},{default:o(()=>[S("Features")]),_:1})]),_:1})]),_:2},1032,["onClick"]),t(I,{class:"py-0",lines:"one",density:"compact",onClick:f=>e.$goPage(`/hotels/${_.id}`,{})},{default:o(()=>[t(v,{value:"item2","active-color":"primary"},{prepend:o(()=>[t(N,{size:"20"})]),default:o(()=>[t(a,{class:"pl-4 text-body-1"},{default:o(()=>[S("Duzetmek")]),_:1})]),_:1})]),_:2},1032,["onClick"]),t(I,{class:"py-0",lines:"one",density:"compact",loading:x(n),onClick:f=>d(_.id)},{default:o(()=>[t(v,{value:"item2","active-color":"primary"},{prepend:o(()=>[t(D,{size:"20"})]),default:o(()=>[t(a,{class:"pl-4 text-body-1"},{default:o(()=>[S("Pozmak")]),_:1})]),_:1})]),_:2},1032,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),t(z,{class:"pt-0 d-flex"},{default:o(()=>[k("h6",{class:"text-h6",textContent:H(`${_.nameEn}`)},null,8,ee)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}}},oe={key:1},ie={__name:"index",setup(b){const u=r(!1),l=j(),c=r([]),n=r(0),d=JSON.parse(localStorage.getItem("hotelQuery"))||{page:1,keyword:""},e=r({page:d.page,keyword:d.keyword,limit:$}),p=a=>c.value=a;E(l,a=>{l.query.categoryId&&(e.value.categoryId=l.query.categoryId),localStorage.setItem("hotelQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const g=a=>{a&&(e.value.keyword="",e.value.page=1,e.value.as=a.as,e.value.sort_by=a.sort_by,localStorage.setItem("hotelQuery",JSON.stringify(e.value)),i())},y=a=>{a&&(e.value.keyword=a,e.value.page=1,localStorage.setItem("hotelQuery",JSON.stringify(e.value)),i())},h=a=>{a&&(e.value.page=a,localStorage.setItem("hotelQuery",JSON.stringify(e.value)),i())},i=async()=>{u.value=!0;const{data:a}=await R(JSON.parse(localStorage.getItem("hotelQuery"))||e.value);c.value=a.data,n.value=a.count,u.value=!1};return M(async()=>{await i(),Math.ceil(n.value/$)==0&&(e.value.page=1,localStorage.setItem("hotelQuery",JSON.stringify(e.value)))}),(a,v)=>u.value?(m(),w(G,{key:0})):(m(),C("div",oe,[t(K,{path:"/hotels/0",items:x(X),onFilter:g,onSearch:y},null,8,["items"]),t(te,{items:c.value,onDeleteItem:p},null,8,["items"]),t(W,{count:n.value,onSetPagination:h,page:e.value.page},null,8,["count","page"])]))}};export{ie as default};
