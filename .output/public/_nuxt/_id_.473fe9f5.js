import{_ as k,r as i,o as d,c as p,b as o,t as v,F as U,y as w,s as F,a as y,m as b,e as r,w as C,z as I,j as O,C as Q,k as $,g as x}from"./entry.95095313.js";import{N as J,O as B}from"./admin.api.c4618457.js";import{b as L}from"./BaseUrl.ad8812f8.js";import{L as P}from"./Loading.5d2fac71.js";import{l as N,_ as z,a as T,p as E}from"./Pagination.12ab80d4.js";const V={class:"container"},D={class:"count"},M={class:"responsive-table"},R=F('<li class="table-header" data-v-35ba4cf8><div class="col col-1" data-v-35ba4cf8>Suraty</div><div class="col col-1" data-v-35ba4cf8>Firstname</div><div class="col col-2" data-v-35ba4cf8>Lastname</div><div class="col col-2" data-v-35ba4cf8>Email</div><div class="col col-4" data-v-35ba4cf8>Functions</div></li>',1),j={class:"table-row"},q={class:"col col-2","data-label":"Suraty"},A=["src"],G={class:"col col-1","data-label":"Firstname"},H={class:"col col-2","data-label":"Lastname"},K={class:"col col-2","data-label":"Email"},W={class:"col col-4","data-label":"Functions"},X={__name:"ChatroomUserTable",props:{items:Array,count:Number,chatroom:Number},emits:["delete-item"],setup(h,{emit:u}){const s=h,c=i([]),l=i(!1),n=async e=>{await J({data:{userId:e,chatRoomId:Number(s.chatroom)}}).then(()=>{l.value=!0,c.value=s.items.filter(_=>_.id!==e),u("delete-item",c.value)}),l.value=!1};return(e,_)=>{const f=y("FilePencilIcon"),m=y("v-btn"),g=y("TrashIcon");return d(),p("div",null,[o("div",V,[o("span",D,"Sany ( "+v(s.count)+" )",1),o("ul",M,[R,(d(!0),p(U,null,w(h.items,(t,a)=>(d(),p("li",j,[o("div",q,[o("img",{crossorigin:"anonymous",class:"image",src:b(L).url_base+"/"+t.avatar},null,8,A)]),o("div",G,v(t.firstName),1),o("div",H,v(t.lastName),1),o("div",K,v(t.email),1),o("div",W,[r(m,I({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:S=>e.$goPage(`/users/${t.id}`),variant:"text"},s),{default:C(()=>[r(f,{size:"15"})]),_:2},1040,["onClick"]),r(m,I({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:S=>n(t.id)},s),{default:C(()=>[r(g,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},Y=k(X,[["__scopeId","data-v-35ba4cf8"]]),Z={key:1},le={__name:"[id]",setup(h){const u=i(!1),s=O(),c=i([]),l=i(0),n=JSON.parse(localStorage.getItem("ChatroomUsersQuery"))||{page:1,keyword:"",as:"",sort_by:""},e=i({page:n.page||1,keyword:n.keyword,limit:N,as:n.as||"",sort_by:n.sort_by||""}),_=a=>{c.value=a,t()};Q(s,a=>{localStorage.setItem("ChatroomUsersQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const f=a=>{a&&(e.value.keyword="",e.value.page=1,e.value.as=a.as,e.value.sort_by=a.sort_by,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(e.value)),t())},m=a=>{a&&(e.value.keyword=a,e.value.page=1,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(e.value)),t())},g=a=>{a&&(e.value.page=a,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(e.value)),t())},t=async()=>{const{data:a}=await B({id:s.params.id},JSON.parse(localStorage.getItem("ChatroomUsersQuery"))||e.value);c.value=a.data,l.value=a.count};return $(async()=>{u.value=!0,await t(),Math.ceil(l.value/N)==0&&(e.value.page=1,localStorage.setItem("ChatroomUsersQuery",JSON.stringify(e.value))),u.value=!1}),(a,S)=>u.value?(d(),x(P,{key:0})):(d(),p("div",Z,[r(z,{path:"/chatrooms/add-user",items:b(E),onFilter:f,onSearch:m,onSearchEmpty:m},null,8,["items"]),r(Y,{items:c.value,onDeleteItem:_,count:l.value,chatroom:b(s).params.id},null,8,["items","count","chatroom"]),r(T,{count:l.value,onSetPagination:g,page:e.value.page},null,8,["count","page"])]))}};export{le as default};
