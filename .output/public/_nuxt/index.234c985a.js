import{_ as D,r as d,o as _,c as g,b as s,t as o,F as N,y as w,s as C,a as h,e as c,w as S,z as I,j as F,C as x,k as P,g as Q,m as $}from"./entry.95095313.js";import{X as J,Y as O}from"./admin.api.c4618457.js";import{L as B}from"./Loading.5d2fac71.js";import{l as k,_ as E,a as L,p as z}from"./Pagination.12ab80d4.js";const T={class:"container"},V={class:"count"},M={class:"responsive-table"},j=C('<li class="table-header" data-v-9c907c29><div class="col col-1" data-v-9c907c29>Firstname</div><div class="col col-2" data-v-9c907c29>Lastname</div><div class="col col-2" data-v-9c907c29>Phone</div><div class="col col-2" data-v-9c907c29>Email</div><div class="col col-2" data-v-9c907c29>Country</div><div class="col col-2" data-v-9c907c29>Event</div><div class="col col-4" data-v-9c907c29>Functions</div></li>',1),q={class:"table-row"},A={class:"col col-1","data-label":"Firstname"},R={class:"col col-2","data-label":"Lastname"},X={class:"col col-2","data-label":"Phone"},Y={class:"col col-2","data-label":"Email"},G={class:"col col-2","data-label":"Country"},H={class:"col col-2","data-label":"Event",style:{color:"green"}},K={class:"col col-4","data-label":"Functions"},U={__name:"DelegateTable",props:{items:Array,count:Number},emits:["delete-item"],setup(p,{emit:u}){const n=p,i=d([]),l=d(!1),r=async e=>{await J({id:e}).then(()=>{l.value=!0,i.value=n.items.filter(m=>m.id!==e),u("delete-item",i.value)}),l.value=!1};return(e,m)=>{const y=h("FilePencilIcon"),v=h("v-btn"),f=h("TrashIcon");return _(),g("div",null,[s("div",T,[s("span",V,"Sany ( "+o(n.count)+" )",1),s("ul",M,[j,(_(!0),g(N,null,w(p.items,(t,a)=>(_(),g("li",q,[s("div",A,o(t.firstName),1),s("div",R,o(t.lastName),1),s("div",X,o(t.phone),1),s("div",Y,o(t.email),1),s("div",G,o(t.country),1),s("div",H,o(t.event!=null?t.event.name:""),1),s("div",K,[c(v,I({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:b=>e.$goPage(`/delegates/${t.id}`),variant:"text"},n),{default:S(()=>[c(y,{size:"15"})]),_:2},1040,["onClick"]),c(v,I({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:b=>r(t.id)},n),{default:S(()=>[c(f,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},W=D(U,[["__scopeId","data-v-9c907c29"]]),Z={key:1},le={__name:"index",setup(p){const u=d(!1),n=F(),i=d([]),l=d(0),r=JSON.parse(localStorage.getItem("DelegatesQuery"))||{page:1,keyword:"",as:"",sort_by:""},e=d({page:r.page||1,keyword:r.keyword,limit:k,as:r.as||"",sort_by:r.sort_by||""}),m=a=>{i.value=a,t()};x(n,a=>{localStorage.setItem("DelegatesQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const y=a=>{a&&(e.value.keyword="",e.value.page=1,e.value.as=a.as,e.value.sort_by=a.sort_by,localStorage.setItem("DelegatesQuery",JSON.stringify(e.value)),t())},v=a=>{a&&(e.value.keyword=a,e.value.page=1,localStorage.setItem("DelegatesQuery",JSON.stringify(e.value)),t())},f=a=>{a&&(e.value.page=a,localStorage.setItem("DelegatesQuery",JSON.stringify(e.value)),t())},t=async()=>{const{data:a}=await O(JSON.parse(localStorage.getItem("DelegatesQuery"))||e.value);i.value=a.data,l.value=a.count};return P(async()=>{u.value=!0,await t(),Math.ceil(l.value/k)==0&&(e.value.page=1,localStorage.setItem("DelegatesQuery",JSON.stringify(e.value))),u.value=!1}),(a,b)=>u.value?(_(),Q(B,{key:0})):(_(),g("div",Z,[c(E,{path:"/delegates/0",items:$(z),onFilter:y,onSearch:v,onSearchEmpty:v},null,8,["items"]),c(W,{items:i.value,onDeleteItem:m,count:l.value},null,8,["items","count"]),c(L,{count:l.value,onSetPagination:f,page:e.value.page},null,8,["count","page"])]))}};export{le as default};
