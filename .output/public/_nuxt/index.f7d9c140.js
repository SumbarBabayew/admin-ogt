import{_ as N,r,o as f,c as g,b as s,t as o,F as R,y as F,s as C,a as I,e as i,w as k,z as q,j as E,C as x,k as P,g as Q}from"./entry.95095313.js";import{b7 as $,a as J,b8 as O}from"./admin.api.c4618457.js";import{L as B}from"./Loading.5d2fac71.js";import{l as w,_ as L,a as z}from"./Pagination.12ab80d4.js";const D={class:"container"},V={class:"count"},A={class:"responsive-table"},M=C('<li class="table-header" data-v-77afa572><div class="col col-1" data-v-77afa572>Firstname</div><div class="col col-2" data-v-77afa572>Lastname</div><div class="col col-2" data-v-77afa572>Phone</div><div class="col col-2" data-v-77afa572>Email</div><div class="col col-2" data-v-77afa572>Company</div><div class="col col-2" data-v-77afa572>Transfer</div><div class="col col-2" data-v-77afa572>Tarif</div><div class="col col-2" data-v-77afa572>Event</div><div class="col col-4" data-v-77afa572>Functions</div></li>',1),j={class:"table-row"},G={class:"col col-1","data-label":"Firstname"},H={class:"col col-2","data-label":"Lastname"},K={class:"col col-2","data-label":"Phone"},U={class:"col col-2","data-label":"Email"},W={class:"col col-2","data-label":"Company"},X={class:"col col-2","data-label":"Transfer"},Y={class:"col col-2","data-label":"Event",style:{color:"green"}},Z={class:"col col-4","data-label":"Functions"},ee={__name:"TransferRequestTable",props:{items:Array,count:Number},emits:["delete-item"],setup(h,{emit:_}){const d=h,u=r([]),l=r(!1),m=async v=>{await $({id:v}).then(()=>{l.value=!0,u.value=d.items.filter(n=>n.id!==v),_("delete-item",u.value)}),l.value=!1};return(v,n)=>{const a=I("FilePencilIcon"),p=I("v-btn"),b=I("TrashIcon");return f(),g("div",null,[s("div",D,[s("span",V,"Sany ( "+o(d.count)+" )",1),s("ul",A,[M,(f(!0),g(R,null,F(h.items,(t,S)=>(f(),g("li",j,[s("div",G,o(t.firstName),1),s("div",H,o(t.lastName),1),s("div",K,o(t.phone),1),s("div",U,o(t.email),1),s("div",W,o(t.company),1),s("div",X,o(t.transferFeature.transfer.nameEn||"")+", "+o(t.transferFeature.nameEn||""),1),s("div",Y,o(t.event!=null?t.event.name:""),1),s("div",Z,[i(p,q({size:"30",class:"profileBtn bg-primary custom-hover-primary",onClick:c=>v.$goPage(`/transfer-request/${t.id}`),variant:"text"},d),{default:k(()=>[i(a,{size:"15"})]),_:2},1040,["onClick"]),i(p,q({size:"30",class:"profileBtn bg-error custom-hover-primary",variant:"text",onClick:c=>m(t.id)},d),{default:k(()=>[i(b,{size:"15"})]),_:2},1040,["onClick"])])]))),256))])])])}}},ae=N(ee,[["__scopeId","data-v-77afa572"]]),te={key:1},ce={__name:"index",setup(h){const _=r(!1),d=E(),u=r([]),l=r(0),m=r([]),v=async()=>{const e=await J({limit:100});var y=[];y.push({name:"All",value:{eventId:""}});for(var T of e.data.data)y.push({name:T.name,value:{eventId:T.id}});m.value=y},n=JSON.parse(localStorage.getItem("TransferRequestsQuery"))||{page:1,keyword:"",as:"",sort_by:""},a=r({page:n.page||1,keyword:n.keyword,limit:w,as:n.as||"",sort_by:n.sort_by||""}),p=e=>{u.value=e,c()};x(d,e=>{localStorage.setItem("TransferRequestsQuery",JSON.stringify(a.value))},{deep:!0,immediate:!0});const b=e=>{e&&(a.value.keyword="",a.value.page=1,a.value.eventId=e.eventId,localStorage.setItem("TransferRequestsQuery",JSON.stringify(a.value)),c())},t=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("TransferRequestsQuery",JSON.stringify(a.value)),c())},S=e=>{e&&(a.value.page=e,localStorage.setItem("TransferRequestsQuery",JSON.stringify(a.value)),c())},c=async()=>{const{data:e}=await O(JSON.parse(localStorage.getItem("TransferRequestsQuery"))||a.value);u.value=e.data,l.value=e.count};return P(async()=>{_.value=!0,await v(),await c(),Math.ceil(l.value/w)==0&&(a.value.page=1,localStorage.setItem("TransferRequestsQuery",JSON.stringify(a.value))),_.value=!1}),(e,y)=>_.value?(f(),Q(B,{key:0})):(f(),g("div",te,[i(L,{path:"/visa-request/0",items:m.value,onFilter:b,onSearch:t,onSearchEmpty:t},null,8,["items"]),i(ae,{items:u.value,onDeleteItem:p,count:l.value},null,8,["items","count"]),i(z,{count:l.value,onSetPagination:S,page:a.value.page},null,8,["count","page"])]))}};export{ce as default};
