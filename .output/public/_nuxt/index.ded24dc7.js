import{r as i,o as m,g as b,w as a,c as C,y as B,F as L,a as s,e as t,b as k,m as w,z as V,f as S,t as j,N as q,j as E,C as M,k as A}from"./entry.95095313.js";import{bg as R,be as U}from"./admin.api.c4618457.js";import{b as G}from"./BaseUrl.ad8812f8.js";import{L as H}from"./Loading.5d2fac71.js";import{l as $,_ as K,a as W,p as X}from"./Pagination.12ab80d4.js";const Y=["src"],Z={class:"d-flex justify-end mt-n5"},ee=["textContent"],te={__name:"TransferCard",props:{items:Array},emits:["delete-item"],setup(x,{emit:u}){const l=x,r=i([]),n=i(!1),d=async e=>{n.value=!1,await R({id:e}).then(()=>{r.value=l.items.filter(p=>p.id!==e),u("delete-item",r.value)}),n.value=!1};return(e,p)=>{const g=q,y=s("DotsIcon"),h=s("v-btn"),c=s("DoorIcon"),o=s("v-list-item-title"),f=s("v-list-item"),I=s("v-list"),T=s("FilePencilIcon"),N=s("TrashIcon"),D=s("v-sheet"),P=s("v-menu"),Q=s("v-card-item"),z=s("v-card"),J=s("v-col"),O=s("v-row");return m(),b(O,null,{default:a(()=>[(m(!0),C(L,null,B(l.items,(_,F)=>(m(),b(J,{cols:"12",lg:"3",sm:"6",key:F},{default:a(()=>[t(z,{elevation:"10",class:"withbg store__card",rounded:"md"},{default:a(()=>[t(g,{to:""},{default:a(()=>[k("img",{crossorigin:"anonymous",src:`${w(G).url_base}/${_.image}`,style:{height:"200px",width:"100%","object-fit":"contain"},class:"rounded-t-md",alt:"123"},null,8,Y)]),_:2},1024),k("div",Z,[t(P,{"close-on-content-click":!1},{activator:a(({props:v})=>[t(h,V({size:"30",icon:"",class:"profileBtn bg-borderColor",variant:"text"},v),{default:a(()=>[t(y)]),_:2},1040)]),default:a(()=>[t(D,{rounded:"md",width:"200",elevation:"10",class:"mt-2"},{default:a(()=>[t(I,{class:"py-0",lines:"one",density:"compact",onClick:v=>e.$goPage(`/transfers/features/${_.id}`,{})},{default:a(()=>[t(f,{value:"item2","active-color":"primary"},{prepend:a(()=>[t(c,{size:"20"})]),default:a(()=>[t(o,{class:"pl-4 text-body-1"},{default:a(()=>[S("Features")]),_:1})]),_:1})]),_:2},1032,["onClick"]),t(I,{class:"py-0",lines:"one",density:"compact",onClick:v=>e.$goPage(`/transfers/${_.id}`,{})},{default:a(()=>[t(f,{value:"item2","active-color":"primary"},{prepend:a(()=>[t(T,{size:"20"})]),default:a(()=>[t(o,{class:"pl-4 text-body-1"},{default:a(()=>[S("Duzetmek")]),_:1})]),_:1})]),_:2},1032,["onClick"]),t(I,{class:"py-0",lines:"one",density:"compact",loading:w(n),onClick:v=>d(_.id)},{default:a(()=>[t(f,{value:"item2","active-color":"primary"},{prepend:a(()=>[t(N,{size:"20"})]),default:a(()=>[t(o,{class:"pl-4 text-body-1"},{default:a(()=>[S("Pozmak")]),_:1})]),_:1})]),_:2},1032,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),t(Q,{class:"pt-0 d-flex"},{default:a(()=>[k("h6",{class:"text-h6",textContent:j(`${_.nameEn}`)},null,8,ee)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}}},ae={key:1},ce={__name:"index",setup(x){const u=i(!1),l=E(),r=i([]),n=i(0),d=JSON.parse(localStorage.getItem("TransfersQuery"))||{page:1,keyword:""},e=i({page:d.page,keyword:d.keyword,limit:$}),p=o=>r.value=o;M(l,o=>{l.query.categoryId&&(e.value.categoryId=l.query.categoryId),localStorage.setItem("TransfersQuery",JSON.stringify(e.value))},{deep:!0,immediate:!0});const g=o=>{o&&(e.value.keyword="",e.value.page=1,e.value.as=o.as,e.value.sort_by=o.sort_by,localStorage.setItem("TransfersQuery",JSON.stringify(e.value)),c())},y=o=>{o&&(e.value.keyword=o,e.value.page=1,localStorage.setItem("TransfersQuery",JSON.stringify(e.value)),c())},h=o=>{o&&(e.value.page=o,localStorage.setItem("TransfersQuery",JSON.stringify(e.value)),c())},c=async()=>{u.value=!0;const{data:o}=await U(JSON.parse(localStorage.getItem("TransfersQuery"))||e.value);r.value=o.data,n.value=o.count,u.value=!1};return A(async()=>{await c(),Math.ceil(n.value/$)==0&&(e.value.page=1,localStorage.setItem("TransfersQuery",JSON.stringify(e.value)))}),(o,f)=>u.value?(m(),b(H,{key:0})):(m(),C("div",ae,[t(K,{path:"/transfers/0",items:w(X),onFilter:g,onSearch:y},null,8,["items"]),t(te,{items:r.value,onDeleteItem:p},null,8,["items"]),t(W,{count:n.value,onSetPagination:h,page:e.value.page},null,8,["count","page"])]))}};export{ce as default};
