import{_ as w}from"./MImageUpload.7346563c.js";import{M as b}from"./MTextField.5144c562.js";/* empty css                      */import{L as z}from"./Loading.5d2fac71.js";import{ai as L,a as M,aj as x,ak as I,al as V}from"./admin.api.c4618457.js";import{j as R,i as $,r as i,k as q,g as O,c as H,e as a,w as l,a as s,o as k,b as f,f as J,t as S,m as v}from"./entry.95095313.js";import"./BaseUrl.ad8812f8.js";/* empty css                       */const K={key:1,class:"mx-3"},Q={class:"d-flex align-center justify-space-between pt-sm-2"},W={class:"d-flex justify-end pb-3"},X={class:"mr-2"},ie={__name:"index",setup(Y){const r=R(),p=$(),n=i(!1),g=i(!1),_=i(!1),d=i(null),c=i([]),B=o=>d.value=o[0],N=o=>{c.value=o},e=i({title:null,orderNumber:null,cover:"",images:[],eventId:null}),P=async()=>{let o=i([]);if(!e.value.title||!e.value.orderNumber)return n.value=!0;_.value=!0,r.params.id==0?await x({data:e.value,id:r.params.id}).then(async t=>{await I({id:t.data.id,data:{file:d.value}}),await V({id:t.data.id,data:{files:c.value}}),p.go(-1)}).catch(t=>{console.log(t)}):(e.value.images.filter(t=>{t[0]!="d"&&o.value.push(t)}),e.value.images=o.value,await x({data:e.value,id:r.params.id}).then(async()=>{d.value&&await I({id:r.params.id,data:{file:d.value}}),typeof c.value[0]=="object"&&(e.value.images.forEach(t=>c.value.unshift(t)),await V({id:r.params.id,data:{files:c.value}})),p.go(-1)})),_.value=!1},y=i([]),j=async()=>{const o=await M({limit:100});y.value=o.data};return q(async()=>{if(await j(),r.params.id!=0){const{data:o}=await L({id:r.params.id});e.value=o}g.value=!0}),(o,t)=>{const E=s("v-card-title"),A=s("ArrowBackUpIcon"),C=s("v-avatar"),h=s("v-btn"),m=s("v-col"),D=s("v-select"),F=s("v-row"),U=s("v-card-item"),G=s("ScriptPlusIcon"),T=s("v-card");return g.value?(k(),H("div",K,[a(T,{elevation:"10",class:"withbg px-3"},{default:l(()=>[a(U,null,{default:l(()=>[f("div",Q,[a(E,{class:"text-h5"},{default:l(()=>[J(S(v(r).params.id==0?"Add":"Edit")+" gallery",1)]),_:1}),a(h,{size:"large",icon:"",class:"bg-primary",onClick:t[0]||(t[0]=u=>v(p).go(-1))},{default:l(()=>[a(C,{size:"large",class:"text-white"},{default:l(()=>[a(A,{size:"25"})]),_:1})]),_:1})]),a(F,{class:"mt-3"},{default:l(()=>[a(m,{cols:"6",lg:"4",sm:"13"},{default:l(()=>[a(b,{type:"text",label:"Title",error:!e.value.title&&n.value,modelValue:e.value.title,"onUpdate:modelValue":t[1]||(t[1]=u=>e.value.title=u)},null,8,["error","modelValue"])]),_:1}),a(m,{cols:"6",lg:"4",sm:"13"},{default:l(()=>[a(b,{type:"text",label:"Order number",error:!e.value.orderNumber&&n.value,modelValue:e.value.orderNumber,"onUpdate:modelValue":t[2]||(t[2]=u=>e.value.orderNumber=u)},null,8,["error","modelValue"])]),_:1}),a(m,{cols:"12",lg:"12",sm:"13"},{default:l(()=>[a(D,{label:"Select event",items:y.value.data,error:!e.value.eventId&&n.value,required:"","item-title":"name",modelValue:e.value.eventId,"onUpdate:modelValue":t[3]||(t[3]=u=>e.value.eventId=u),"item-value":"id",variant:"outlined","return-object":!1},null,8,["items","error","modelValue"])]),_:1}),a(m,{lg:"6",sm:"12"},{default:l(()=>[a(w,{width:"width:100%",style:"display:flex; justify-content:center",photoSrc:{type:"string",value:e.value.cover},error:n.value&&!d.value,selectedFile:d.value,onPhotoPath:B,placeholder:"Surat"},null,8,["photoSrc","error","selectedFile"])]),_:1}),a(m,{cols:"12",lg:"12",sm:"13"},{default:l(()=>[a(w,{error:n.value&&e.value.images.length==0,selectedFile:e.value.images,photoSrc:{type:"array",value:e.value.images},type:"gallery",onPhotoPath:N,multiple:!0,deleteImageById:v(r).params.id,placeholder:"Suratlar",width:"108px",height:"100px"},null,8,["error","selectedFile","photoSrc","deleteImageById"])]),_:1})]),_:1})]),_:1}),f("div",W,[a(h,{class:"profileBtn bg-primary custom-hover-primary",variant:"text",onClick:P,loading:_.value},{default:l(()=>[f("span",X,S(v(r).params.id==0?"Add":"Edit")+" gallery",1),a(G)]),_:1},8,["loading"])])]),_:1})])):(k(),O(z,{key:0}))}}};export{ie as default};
