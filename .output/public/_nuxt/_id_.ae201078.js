import{r as o,j as d,C as _,k as S,g as I,c as h,e as c,m,o as f}from"./entry.95095313.js";import{bc as k}from"./admin.api.c4618457.js";import{T}from"./TransferFeaturesTable.8e108ece.js";import{L as F}from"./Loading.5d2fac71.js";import{l as g,_ as w,a as N,p as Q}from"./Pagination.12ab80d4.js";const b={key:1},M={__name:"[id]",setup(J){const u=o(!1),l=d(),n=o([]),r=o(0),s=JSON.parse(localStorage.getItem("TransferFeaturesQuery"))||{page:1,keyword:"",as:"",sort_by:"",transferId:""},a=o({page:s.page||1,keyword:s.keyword,limit:g,as:s.as||"",sort_by:s.sort_by||"",transferId:""}),y=e=>{n.value=e,t()};_(l,e=>{localStorage.setItem("TransferFeaturesQuery",JSON.stringify(a.value))},{deep:!0,immediate:!0});const p=e=>{e&&(a.value.keyword="",a.value.page=1,a.value.as=e.as,a.value.sort_by=e.sort_by,localStorage.setItem("TransferFeaturesQuery",JSON.stringify(a.value)),t())},i=e=>{e&&(a.value.keyword=e,a.value.page=1,localStorage.setItem("TransferFeaturesQuery",JSON.stringify(a.value)),t())},v=e=>{e&&(a.value.page=e,localStorage.setItem("TransferFeaturesQuery",JSON.stringify(a.value)),t())},t=async()=>{const{data:e}=await k({transferId:l.params.id},JSON.parse(localStorage.getItem("TransferFeaturesQuery"))||a.value);n.value=e.data,r.value=e.count};return S(async()=>{u.value=!0,await t(),Math.ceil(r.value/g)==0&&(a.value.page=1,localStorage.setItem("TransferFeaturesQuery",JSON.stringify(a.value))),u.value=!1}),(e,O)=>u.value?(f(),I(F,{key:0})):(f(),h("div",b,[c(w,{path:"/transfers/features/add/",items:m(Q),onFilter:p,onSearch:i,onSearchEmpty:i},null,8,["items"]),c(T,{items:n.value,onDeleteItem:y,count:r.value,chatroom:m(l).params.id},null,8,["items","count","chatroom"]),c(N,{count:r.value,onSetPagination:v,page:a.value.page},null,8,["count","page"])]))}};export{M as default};
